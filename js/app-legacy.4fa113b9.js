(function(){"use strict";var t={2374:function(t,e,a){a(6992),a(8674),a(9601),a(7727),a(8309),a(7327),a(1539);var s=a(8935),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-aside",{attrs:{width:"auto"}},[a("NavMenu")],1),a("el-container",[a("el-header",{staticStyle:{height:"60px",padding:"0"}},[a("NavBar")],1),a("el-main",[a("router-view",{key:t.$route.fullPath,scopedSlots:t._u([{key:"default",fn:function(t){var e=t.Component,s=t.route;return[a("transition",{attrs:{name:s.meta.transition||"fade"}},[a(e,{tag:"component"})],1)]}}])})],1)],1)],1)],1)},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"line"}),a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex2,mode:"horizontal","background-color":"#005BBB","text-color":"#fff","active-text-color":"#ffffff",router:""}},[a("el-menu-item",{attrs:{index:"/"}},[t._v("DotPlan")]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!this.$store.state.user.isLoggedIn,expression:"!this.$store.state.user.isLoggedIn"}],attrs:{index:"signup",route:"signup"}},[t._v(" Sign Up ")]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!this.$store.state.user.isLoggedIn,expression:"!this.$store.state.user.isLoggedIn"}],attrs:{index:"login",route:"login"}},[t._v(" Log In ")]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.user.isLoggedIn,expression:"this.$store.state.user.isLoggedIn"}],staticStyle:{float:"right"}},[a("el-dropdown",[a("el-button",{staticStyle:{float:"right",color:"white"},attrs:{type:"primary"}},[t._v(" "+t._s(this.$store.state.user.email)+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("el-link",{attrs:{underline:!1},on:{click:t.goSettings}},[t._v("Settings")])],1),a("el-dropdown-item",[a("el-link",{attrs:{underline:!1},on:{click:t.logout}},[t._v("Log Out")])],1)],1)],1)],1),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.user.isLoggedIn,expression:"this.$store.state.user.isLoggedIn"}],staticStyle:{float:"right"},on:{click:t.logout}})],1)],1)},i=[],l={data:function(){return{activeIndex:"1",activeIndex2:"1"}},methods:{logout:function(){var t=this;this.$confirm("Are you sure to log out?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){t.$store.commit("clearToken"),t.$store.commit("clearEmail"),t.$store.commit("setIsLoggedIn",!1),t.$store.commit("setLoading",!0),t.$store.commit("clearTasks"),t.$store.commit("clearCards"),t.$store.commit("clearStacks"),t.$store.commit("clearDisplayingCardID"),t.$store.commit("clearDisplayingTasks"),t.$router.push({name:"UserHome"}),setTimeout((function(){t.$store.commit("setLoading",!1),t.$message({type:"success",message:"You have logged out"})}),1e3)})).catch((function(){}))},goSettings:function(){var t=this;"SettingPage"!==this.$route.name&&(this.$store.commit("setLoading",!0),setTimeout((function(){t.$store.commit("setLoading",!1),t.$router.push({name:"SettingPage"})}),500))}},computed:{}},c=l,d=a(1001),u=(0,d.Z)(c,n,i,!1,null,null,null),m=u.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"background-color":"#d9d8d7"},attrs:{id:"leftmenu"}},[a("el-radio-group",{staticStyle:{"padding-top":"10px"},model:{value:t.isCollapse,callback:function(e){t.isCollapse=e},expression:"isCollapse"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-menu",circle:""},on:{click:function(e){t.isCollapse=!t.isCollapse}}})],1),a("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{height:"93vh"},attrs:{"default-active":"2",collapse:t.isCollapse,"background-color":"#d9d8d7",router:""},on:{open:t.handleOpen,close:t.handleClose}},[a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.isLoggedIn,expression:"isLoggedIn"}],attrs:{index:"/"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("User Home")])]),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.isLoggedIn,expression:"isLoggedIn"}],attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("Edit")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"edit-stack"}},[t._v("Stack")]),a("el-menu-item",{attrs:{index:"edit-card"}},[t._v("Card")]),a("el-menu-item",{attrs:{index:"edit-task"}},[t._v("Task")])],1)],2),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!t.isLoggedIn,expression:"!isLoggedIn"}],attrs:{index:"/"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("Introduction")])]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.isLoggedIn,expression:"isLoggedIn"}],attrs:{index:"settings",route:"settings"}},[a("i",{staticClass:"el-icon-setting"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("Settings")])])],1)],1)},p=[],h={data:function(){return{isCollapse:!0,num:1}},methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)},toggleNav:function(){return this.isCollapse=!this.isCollapase,this.num++,this.isCollapse},updateEdit:function(t){this.$store.commit("setEditing",t)}},computed:{isLoggedIn:function(){return this.$store.state.user.isLoggedIn}}},g=h,k=(0,d.Z)(g,f,p,!1,null,null,null),v=k.exports,w=a(6166),b=a.n(w),y=a(6762);s["default"].use(y.Z,b());var $={name:"App",components:{NavBar:m,NavMenu:v},data:function(){return{selection:1}},computed:{loading:function(){return this.$store.state.user.loading},loading_text:function(){return this.$store.state.user.loadingText}},methods:{reserve:function(){var t=this;this.loading=!0,setTimeout((function(){return t.loading=!1}),1e3)},updateLoginStatus:function(){var t=this;b().get(b().defaults.baseURL+"session.php?token="+this.$store.state.user.token).then((function(e){t.$store.commit("setIsLoggedIn",e.data&&"success"===e.data.status),"success"===e.data.status&&(t.$store.commit("setLoadingText","Redirecting..."),t.$store.commit("setLoading",!0),setTimeout((function(){t.$store.commit("setLoading",!1),t.$store.commit("setLoadingText","Loading...")}),1e3)),e.data.email&&t.$store.commit("setEmail",e.data.email)})).catch((function(e){console.log(e),t.$store.commit("clearToken"),t.$store.commit("clearEmail"),t.$store.commit("clearTasks"),t.$store.commit("clearCards"),t.$store.commit("clearStacks"),t.$store.commit("setIsLoggedIn",!1),t.$store.commit("setLoading",!1),t.$router.push({name:"UserHome"})}))}},mounted:function(){var t=this;this.updateLoginStatus(),this.showReminder(),setTimeout((function(){t.getStacks(),t.getTasks(),t.getCards()}),1e3)}},D=$,S=(0,d.Z)(D,o,r,!1,null,null,null),x=S.exports,C=a(4549),T=a.n(C),_=a(6262),I=a(8209),L=a.n(I);a(243);s["default"].use(L());var E={},N=new(L())(E),P=a(2809),U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("HelloWorld"),this.$store.state.user.isLoggedIn?t._e():a("LandingPage"),t.showTasksFinishedResult?a("el-result",{staticStyle:{"padding-top":"200px"},attrs:{icon:"success",title:"You have finished all your tasks!"}}):t._e(),a("AnotherStack",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.user.isLoggedIn&&this.$store.state.user.tasks.length>0,expression:"this.$store.state.user.isLoggedIn && this.$store.state.user.tasks.length > 0"}],attrs:{displayTasksNumber:t.displayTasksNumber,angle:t.angle,height:t.height,width:t.width,border:t.border}}),a("el-row",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.user.isLoggedIn&&this.$store.state.user.tasks.length>0,expression:"this.$store.state.user.isLoggedIn && this.$store.state.user.tasks.length > 0"}]},[a("div",{staticStyle:{float:"left","margin-bottom":"10px"}},[a("el-radio-group",{on:{change:t.show},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[a("el-radio-button",{attrs:{label:"Past Due"}}),a("el-radio-button",{attrs:{label:"Due Soon"}})],1),a("el-divider",{attrs:{direction:"vertical"}}),a("el-button",{attrs:{type:"info"},on:{click:t.clearSelection}},[t._v("Clear")]),a("el-popover",{attrs:{placement:"top-end",width:"400",trigger:"hover"}},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("Number")]),a("el-slider",{attrs:{step:1,max:8,"show-stops":""},model:{value:t.displayTasksNumber,callback:function(e){t.displayTasksNumber=e},expression:"displayTasksNumber"}}),a("span",{staticClass:"demonstration"},[t._v("Angle")]),a("el-slider",{attrs:{step:5,max:80,"show-stops":""},model:{value:t.angle,callback:function(e){t.angle=e},expression:"angle"}}),a("span",{staticClass:"demonstration"},[t._v("Height")]),a("el-slider",{attrs:{step:10,min:250,max:500},model:{value:t.height,callback:function(e){t.height=e},expression:"height"}}),a("span",{staticClass:"demonstration"},[t._v("Width")]),a("el-slider",{attrs:{step:10,min:270,max:500},model:{value:t.width,callback:function(e){t.width=e},expression:"width"}}),a("span",{staticClass:"demonstration"},[t._v("Border")]),a("el-slider",{attrs:{step:2,min:0,max:30},model:{value:t.border,callback:function(e){t.border=e},expression:"border"}})],1),a("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v("Customize")])],1)],1)]),this.$store.state.user.isLoggedIn&&this.$store.state.user.tasks.length>0?a("TaskCascader",{on:{childOneClick:t.handleChildOneClick}}):t._e()],1)},F=[],O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"})},A=[],R={name:"HelloWorld",props:{msg:String},data:function(){return{name:"aaa"}}},B=R,Z=(0,d.Z)(B,O,A,!1,null,"51d94731",null),j=Z.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",[a("el-carousel",{staticStyle:{width:"80%",margin:"0 auto"},attrs:{interval:2500,arrow:"hover",height:"50vh"}},t._l(t.desciptions,(function(t){return a("el-carousel-item",{key:t.desc},[a("img",{staticStyle:{width:"100%",height:"auto"},attrs:{src:t.imgSrc}})])})),1)],1)],1),a("el-row",{staticStyle:{width:"80%",margin:"0 auto","margin-top":"30px"}},[a("el-col",{attrs:{span:1}},[a("img",{staticStyle:{width:"auto",height:"auto","margin-top":"30px"},attrs:{src:t.logoImg}})]),a("el-col",{attrs:{span:13,offset:5}},[a("h1",{staticStyle:{"font-weight":"bold","font-size":"30px"}},[t._v(" Time Management APP")]),a("br"),a("br"),a("h3",{staticStyle:{color:"gray","font-weight":"lighter","text-align":"left"}},[t._v(" Effective time management begins with clear on exactly how you manage your time on your tasks. "),a("br"),a("br"),t._v(" If you are struggling to manage time then DotPlan app will help you go further, "),a("br"),a("br"),t._v(" It has simple user interface that easily customizable based on what you need for everyday use. ")])])],1)],1)},M=[],q={components:{},data:function(){return{isCollapse:!1,num:1,logoImg:a(6949),desciptions:[{desc:"aaa",imgSrc:a(1199)},{desc:"bbb",imgSrc:a(4151)},{desc:"ccc",imgSrc:a(3110)}]}}},W=q,z=(0,d.Z)(W,H,M,!1,null,"7975b010",null),Y=z.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-cascader-panel",{attrs:{options:t.stackOption,"show-all-levels":!1},on:{change:t.handleChange}})},K=[],G={mounted:function(){this.getStacks()},computed:{stackOption:function(){var t=[],e=this.$store.state.user.stacks;if(0!==e.length){var a={value:"All Tasks",label:"All Tasks"};t.push(a)}for(var s=0;s<e.length;s++){var o={};o["value"]=e[s].name,o["label"]=e[s].name,o["children"]=[];var r=this.getCardsByStackID(e[s].stackID);if(0===r.length){var n={value:"No cards under this stack",label:"No cards under this stack",disabled:!0};o["children"].push(n)}else for(var i=0;i<r.length;i++){var l={};l["value"]=r[i].name,l["label"]=r[i].name,o["children"].push(l)}t.push(o)}return t}},data:function(){return{}},methods:{handleChange:function(t){var e=this;if("All Tasks"!==t[0]){var a=t[1],s=this.getCardIdByCardName(a);this.$emit("childOneClick"),this.$store.commit("setLoading",!0),setTimeout((function(){e.$store.commit("setLoading",!1),e.$store.commit("setDisplayingCardID",s),e.$store.commit("setDisplayingTasks",e.$store.state.user.tasks.filter((function(t){return t.cardID===s})))}),400)}else setTimeout((function(){e.$store.commit("setLoading",!1),e.$store.commit("setDisplayingCardID",0),e.$store.commit("setDisplayingTasks",e.$store.state.user.tasks)}),400)}}},J=G,Q=(0,d.Z)(J,V,K,!1,null,null,null),X=Q.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.updated?a("carousel-3d",{directives:[{name:"loading",rawName:"v-loading",value:t.stackLoading,expression:"stackLoading"}],staticStyle:{"margin-top":"90px","margin-bottom":"20px"},attrs:{"element-loading-text":"You don't have any tasks in this card","element-loading-spinner":"el-icon-timer",controlsVisible:"",display:this.displayTasksNumber,perspective:this.angle,height:this.height,width:this.width,border:this.border}},t._l(t.displayingTasks,(function(e,s){return a("slide",{key:e.taskID,style:{"background-color":e.color},attrs:{index:s}},[a("el-row",{staticStyle:{margin:"10px",padding:"10 auto"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""}}),a("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:""}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""}})],1),a("el-descriptions",{staticStyle:{padding:"10px"},attrs:{direction:"horizontal",column:1,border:"",size:"medium"}},[a("el-descriptions-item",{attrs:{label:"Task"}},[t._v(" "+t._s(e.name)+" ")]),a("el-descriptions-item",{attrs:{label:"Extra Notes"}},[t._v(t._s(e.extra_notes))]),a("el-descriptions-item",{attrs:{label:"Due date",span:2}},[t._v(t._s(e.due_date))])],1)],1)})),1):t._e()},et=[],at={props:["displayTasksNumber","angle","height","width","border"],mounted:function(){var t=this;setInterval((function(){t.displayingTasks=t.$store.state.user.displayingTasks}),500)},data:function(){return{updated:!0,displayingTasks:[]}},watch:{displayingTasks:function(){var t=this;this.updated=!1,this.$nextTick((function(){t.updated=!0}))}},computed:{tasks:function(){var t=this.$store.state.user.displayingCardID;return this.$store.state.user.tasks.filter((function(e){return e.cardID===t}))},stackLoading:function(){if(this.$store.state.user.displayingTasks.length>0)return!1;var t=this.$store.state.user.displayingCardID;if(void 0===t)return!0;var e=this.$store.state.user.tasks.filter((function(e){return e.cardID===t}));return 0===e.length}}},st=at,ot=(0,d.Z)(st,tt,et,!1,null,null,null),rt=ot.exports,nt={mounted:function(){var t=this;this.updateAllData(),setInterval((function(){t.showTasksFinishedResult=t.$store.state.user.isLoggedIn&&0===t.$store.state.user.tasks.length}),100)},data:function(){return{filter:"",selectionCleared:!0,showTasksFinishedResult:!1,displayTasksNumber:5,angle:35,height:270,width:360,border:2}},methods:{handleChildOneClick:function(){this.filter=""},show:function(){if("Past Due"===this.filter){var t=this.$store.state.user.displayingCardID,e=0===t?this.$store.state.user.tasks:this.$store.state.user.tasks.filter((function(e){return e["cardID"]===t}));this.$store.commit("setDisplayingTasks",e.filter((function(t){return new Date(t["due_date"])<new Date})))}if("Due Soon"===this.filter){var a=this.$store.state.user.displayingCardID,s=0===a?this.$store.state.user.tasks:this.$store.state.user.tasks.filter((function(t){return t["cardID"]===a}));this.$store.commit("setDisplayingTasks",s.filter((function(t){return new Date(t["due_date"])>new Date})))}},clearSelection:function(){this.filter="";var t=this.$store.state.user.displayingCardID,e=0===t?this.$store.state.user.tasks:this.$store.state.user.tasks.filter((function(e){return e["cardID"]===t}));this.$store.commit("setDisplayingTasks",e)}},components:{HelloWorld:j,LandingPage:Y,TaskCascader:X,AnotherStack:rt},computed:{hasTasks:function(){return this.$store.state.user.tasks.length>0},tasksDisplaying:function(){return void 0!==this.$store.state.displayingCardID},showRadio:function(){return this.$store.state.user.isLoggedIn&&void 0===this.$store.state.user.displayingCardID||this.$store.state.user.displayingTasks.length>0}}},it=nt,lt=(0,d.Z)(it,U,F,!1,null,null,null),ct=lt.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card",staticStyle:{"margin-left":"auto","margin-right":"auto",width:"50%","margin-top":"10vh"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("Sign Up")])]),a("SignupForm")],1)],1)},ut=[],mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm.apply(null,arguments)}}},[a("el-form",{ref:"elForm",attrs:{model:t.formData,rules:t.rules,size:"small","label-width":"100px","label-position":"left"}},[a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Email",prop:"Email"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"Email",clearable:""},model:{value:t.formData.Email,callback:function(e){t.$set(t.formData,"Email",e)},expression:"formData.Email"}})],1)],1)],1),a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Password",prop:"Password"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"Password",clearable:"","show-password":""},model:{value:t.formData.Password,callback:function(e){t.$set(t.formData,"Password",e)},expression:"formData.Password"}})],1)],1)],1),a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"138px",label:"Confirm Password",prop:"ConfirmPassword"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"Confirm Password",clearable:"","show-password":""},model:{value:t.formData.ConfirmPassword,callback:function(e){t.$set(t.formData,"ConfirmPassword",e)},expression:"formData.ConfirmPassword"}})],1)],1)],1),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("Sign Up")]),a("el-button",{on:{click:t.resetForm}},[t._v("Reset")])],1)],1)],1)},ft=[],pt=a(8143);a(9720),a(2222);function ht(t){for(var e={},a=0,s=Object.entries(t);a<s.length;a++){var o=(0,pt.Z)(s[a],2),r=o[0],n=o[1];console.log("".concat(r,": ").concat(n)),e[r]=n}return e}var gt={components:{},props:[],data:function(){return{formData:{Email:void 0,Password:void 0,ConfirmPassword:void 0},rules:{Email:[{required:!0,message:"Email cannot be empty",trigger:"blur"},{pattern:/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.(com|cn|edu))+$/,message:"Wrong Email format",trigger:"blur"}],Password:[{required:!0,message:"Password is required",trigger:"blur"}],ConfirmPassword:[{required:!0,message:"Password cannot be empty",trigger:"blur"}]}}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{submitForm:function(){var t=this,e=this;this.$refs["elForm"].validate((function(a){a&&(t.checkForm(t.formData)?(console.log(ht(t.formData)),b().post(b().defaults.baseURL+"/signup.php",ht(t.formData)).then((function(t){"error"===t.data.status?e.showError(t.data.error):(e.$store.commit("setLoading",!0),setTimeout((function(){e.$store.commit("setLoading",!1),e.$router.push({name:"UserHome"}),e.$message({message:"Welcome!",type:"success"})}),1e3),e.$store.commit("setToken",t.data.token),e.$store.commit("setEmail",t.data.email),e.$store.commit("setIsLoggedIn",!0))})).catch((function(t){console.log(t),e.showError("Server is down")}))):t.showError("Passwords do not match"))}))},resetForm:function(){this.$refs["elForm"].resetFields()},checkForm:function(t){var e=t.Password,a=t.ConfirmPassword;return e===a},showError:function(t){this.$message.error(t)},serializeFormData:function(t){var e="";return e+="Email="+t.Email,e+="&",e+="Password="+t.Password,e}}},kt=gt,vt=(0,d.Z)(kt,mt,ft,!1,null,null,null),wt=vt.exports,bt={components:{SignupForm:wt}},yt=bt,$t=(0,d.Z)(yt,dt,ut,!1,null,"73ccbe54",null),Dt=$t.exports,St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card",staticStyle:{"margin-left":"auto","margin-right":"auto",width:"50%","margin-top":"10vh"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("Login")])]),a("LoginForm")],1)],1)},xt=[],Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm.apply(null,arguments)}}},[a("el-form",{ref:"elForm",attrs:{model:t.formData,rules:t.rules,size:"small","label-width":"100px","label-position":"left"}},[a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Email",prop:"Email"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"Email",clearable:""},model:{value:t.formData.Email,callback:function(e){t.$set(t.formData,"Email",e)},expression:"formData.Email"}})],1)],1)],1),a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Password",prop:"Password"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"Password",clearable:"","show-password":""},model:{value:t.formData.Password,callback:function(e){t.$set(t.formData,"Password",e)},expression:"formData.Password"}})],1)],1)],1),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("Log In")])],1)],1)],1)},Tt=[],_t={components:{},data:function(){return{formData:{Email:void 0,Password:void 0},rules:{Email:[{required:!0,message:"Email cannot be empty",trigger:"blur"},{pattern:/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.(com|cn|edu))+$/,message:"Wrong Email format",trigger:"blur"}],Password:[{required:!0,message:"Password is required",trigger:"blur"}]}}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{submitForm:function(){var t=this,e=this;this.$refs["elForm"].validate((function(a){a&&b().post(b().defaults.baseURL+"/login.php",ht(t.formData)).then((function(t){"success"===t.data.status?(e.$store.commit("setLoading",!0),e.$router.push({name:"UserHome"}),setTimeout((function(){e.$store.commit("setLoading",!1),e.$message({message:"Login Success!",type:"success"})}),1e3),e.$store.commit("setToken",t.data.token),e.$store.commit("setEmail",t.data.email),e.$store.commit("setIsLoggedIn",!0)):"error"===t.data.status&&e.showError(t.data.error)})).catch((function(t){console.log(t),e.showError("Server is down")}))}))},showError:function(t){this.$message.error(t)}}},It=_t,Lt=(0,d.Z)(It,Ct,Tt,!1,null,null,null),Et=Lt.exports,Nt={components:{LoginForm:Et},data:function(){return{url:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}}},Pt=Nt,Ut=(0,d.Z)(Pt,St,xt,!1,null,"7193d3d6",null),Ft=Ut.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card",staticStyle:{"margin-left":"auto","margin-right":"auto",width:"50%","margin-top":"10vh"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("i",{staticClass:"el-icon-share"}),a("span",[a("b",[t._v(" Settings")])])]),a("el-row",[a("el-link",{attrs:{href:t.icsFile,download:"DotPlanEvents.ics"}},[a("el-button",{staticStyle:{width:"230px"},attrs:{type:"primary",icon:"el-icon-download",plain:""},on:{click:t.generateIcsFile}},[t._v("Export my tasks")])],1)],1),a("el-row",[a("el-button",{staticStyle:{width:"230px","margin-top":"15px"},attrs:{type:"primary",icon:"el-icon-edit",plain:""},on:{click:t.handleUpdatePassword}},[t._v("Change my password")])],1),a("el-row",[a("el-button",{staticStyle:{width:"230px","margin-top":"15px"},attrs:{type:"danger",icon:"el-icon-delete",plain:""},on:{click:t.handleDeleteUser}},[t._v("Delete my account")])],1)],1),a("el-dialog",{staticStyle:{"margin-left":"auto","margin-right":"auto",width:"65%"},attrs:{title:"Change password",visible:t.isDialogShown},on:{"update:visible":function(e){t.isDialogShown=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,"label-width":"180px"}},[a("el-form-item",{attrs:{label:"Email",hidden:""}},[a("el-input",{model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}})],1),a("el-form-item",{attrs:{label:"Old password",prop:"password"}},[a("el-input",{attrs:{clearable:"","show-password":""},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),a("el-form-item",{attrs:{label:"New password",prop:"newPassword"}},[a("el-input",{attrs:{clearable:"","show-password":""},model:{value:t.formData.newPassword,callback:function(e){t.$set(t.formData,"newPassword",e)},expression:"formData.newPassword"}})],1),a("el-form-item",{attrs:{label:"Confirm password",prop:"confirmPassword"}},[a("el-input",{attrs:{clearable:"","show-password":""},model:{value:t.formData.confirmPassword,callback:function(e){t.$set(t.formData,"confirmPassword",e)},expression:"formData.confirmPassword"}})],1)],1),a("el-button",{on:{click:function(e){t.isDialogShown=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onsubmit}},[t._v("Confirm")])],1)],1)},At=[],Rt=(a(4916),a(3123),a(9600),a(2526),a(1817),a(8783),a(3948),a(285),a(1637),{components:{},data:function(){return{rules:{password:[{required:!0,message:"Old password is required",trigger:"blur"}],newPassword:[{required:!0,message:"Password cannot be empty",trigger:"blur"}],confirmPassword:[{required:!0,message:"Password cannot be empty",trigger:"blur"}]},isDialogShown:!1,icsFile:null,selection:1,loading:!1,formData:{email:void 0,password:void 0,newPassword:void 0,confirmPassword:void 0}}},computed:{email:function(){return this.$store.state.user.email}},methods:{handleDeleteUser:function(){var t=this,e=this;this.$confirm("This will permanently delete your account. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){b()["delete"](b().defaults.baseURL+"/login.php?email="+t.email).then((function(t){e.$store.commit("setLoading",!1),t.data.status&&"success"===t.data.status&&(e.$store.commit("clearToken"),e.$store.commit("clearEmail"),e.$store.commit("clearTasks"),e.$store.commit("clearCards"),e.$store.commit("clearStacks"),e.$store.commit("setIsLoggedIn",!1),e.$store.commit("setLoading",!1),e.$router.push({name:"UserHome"}),e.$message({type:"success",message:"Deleted successfully"}))}))})).catch((function(){}))},onsubmit:function(){var t=this;this.formData.email=this.email,this.formData.newPassword===this.formData.confirmPassword?(this.isDialogShown=!1,b().put(b().defaults.baseURL+"/login.php",ht(this.formData)).then((function(e){"success"===e.data.status?(t.$store.commit("setLoading",!0),setTimeout((function(){t.$store.commit("setLoading",!1),t.$message({message:"Password updated!",type:"success"})}),1e3)):"error"===e.data.status&&(t.$store.commit("setLoading",!0),setTimeout((function(){t.$store.commit("setLoading",!1),t.$message.error(e.data.error)}),1e3))})).catch((function(e){t.$message.error("Server is down"),t.$message.error(e)}))):this.$message.error("Passwords do not match")},handleUpdatePassword:function(){this.isDialogShown=!0,this.formData.email=this.email,this.formData.password=void 0,this.formData.newPassword=void 0,this.formData.confirmPassword=void 0},reserve:function(){var t=this;this.loading=!0,setTimeout((function(){return t.loading=!1}),2e3)},convertDate:function(t){var e=new Date(t).toISOString();return e=e.split("T")[0],e=e.split("-"),e=e.join(""),e},getNextTaskCounter:function(){var t=parseInt(localStorage.userTaskCounter)+1;return localStorage.userTaskCounter=t,t},addEventDataToICSFile:function(t){var e="BEGIN:VEVENT\n",a="".concat(this.email).concat(t.taskID,"@cse442NohTypDotPlan"),s=null,o=this.convertDate(Date.now());null!=t["due_date"]&&(console.log("Task with due date!"),s=this.convertDate(t["due_date"]));var r=t["name"],n=t["description"];return e+="UID:".concat(a,"\n")+"DTSTART:".concat(o,"\n")+"SUMMARY:".concat(r,"\n")+"DESCRIPTION:".concat(n,"\n"),null!=s&&(e+="DTEND:".concat(s,"\n")),e+="END:VEVENT\n",e},generateIcsFile:function(t){var e=this.$store.state.user.tasks;if(this.$store.state.user.tasks&&0!==this.$store.state.user.tasks.length){for(var a="BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Dot-Plan-Cal//EN\nCALSCALE:GREGORIAN\nMETHOD:PUBLISH\n",s=0;s<e.length;s++)a+=this.addEventDataToICSFile(e[s]);a+="END:VCALENDAR\n";var o=new File([a],"DotPlanEvents.ics",{type:"text/calendar"});return null!==this.icsFile&&window.URL.revokeObjectURL(this.icsFile),this.icsFile=window.URL.createObjectURL(o),this.icsFile}t&&this.$message({message:"You have no tasks to export!",type:"warning"})}},mounted:function(){var t=this;setTimeout((function(){t.generateIcsFile(!1)}),800)}}),Bt=Rt,Zt=(0,d.Z)(Bt,Ot,At,!1,null,"5cca56e1",null),jt=Zt.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editForm"},[a("StackTable")],1)},Mt=[],qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(e){return t.handleAdd()}}},[t._v("Add")])],1)],1),a("el-dialog",{attrs:{title:"add"===t.operateType?"Add a stack":"Update a stack",visible:t.isDialogShown},on:{"update:visible":function(e){t.isDialogShown=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Stack Name"}},[a("el-input",{model:{value:t.form.stackName,callback:function(e){t.$set(t.form,"stackName",e)},expression:"form.stackName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isDialogShown=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onsubmit}},[t._v("Confirm")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.stacks.filter((function(e){return!t.stackSearch||e.name.toLowerCase().includes(t.stackSearch.toLowerCase())}))}},[a("el-table-column",{attrs:{sortable:"",label:"Stack",prop:"name"}}),a("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-input",{attrs:{placeholder:"Type to search"},on:{click:function(a){return t.console.log(e)}},model:{value:t.stackSearch,callback:function(e){t.stackSearch=e},expression:"stackSearch"}})]}},{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("Edit")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("Delete")])]}}])})],1)],1)},Wt=[],zt={components:{},data:function(){return{stackSearch:"",operateType:"add",isDialogShown:!1,form:{Email:"",stackName:"",stackID:-1}}},computed:{stacks:function(){return this.$store.state.user.stacks}},methods:{handleEdit:function(t,e){console.log(t,e),this.isDialogShown=!0,this.operateType="edit",this.form.stackName=e.name,this.form.Email=e.email,this.form.stackID=e.stackID},handleDelete:function(t,e){var a=this,s=this;this.$confirm("Are you sure to delete this stack?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){a.$store.commit("setLoading",!0),b()["delete"](b().defaults.baseURL+"/stack.php?stackID="+e.stackID).then((function(t){s.$store.commit("setLoading",!1),t.data.status&&"success"===t.data.status&&(s.getStacks(),s.getCards(),s.$message({type:"success",message:"Deleted successfully"}))}))})).catch((function(){}))},handleAdd:function(){this.form.stackName="",this.form.Email=this.$store.state.user.email,this.isDialogShown=!0,this.operateType="add"},onsubmit:function(){var t=this;this.isDialogShown=!1,b()({method:"add"===this.operateType?"post":"put",url:b().defaults.baseURL+"/stack.php",data:ht(this.form)}).then((function(e){t.$store.commit("setLoading",!1),e.data.status&&"success"===e.data.status?(t.getStacks(),t.$message({type:"success",message:"add"===t.operateType?"Added successfully":"Updated successfully"})):e.data.status&&"error"===e.data.status&&t.$message({type:"error",message:e.data.error})}))}},mounted:function(){var t=this;this.$store.commit("setLoading",!0),b().get(b().defaults.baseURL+"stack.php?email="+this.$store.state.user.email).then((function(e){t.$store.commit("setStacks",e.data.stacks)})).catch((function(t){console.log(t)})).finally((function(){t.$store.commit("setLoading",!1)}))}},Yt=zt,Vt=(0,d.Z)(Yt,qt,Wt,!1,null,null,null),Kt=Vt.exports,Gt={name:"StackEditPage",props:{msg:String},components:{StackTable:Kt},data:function(){return{operateType:"add",isDialogShown:!1}},methods:{}},Jt=Gt,Qt=(0,d.Z)(Jt,Ht,Mt,!1,null,null,null),Xt=Qt.exports,te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editForm"},[a("el-dialog",{attrs:{title:"add"===t.operateType?"Add a task":"Update a task",visible:t.isShown},on:{"update:visible":function(e){t.isShown=e}}},[a("CrudForm",{ref:"form",attrs:{formLabel:t.operateFormLabel,form:t.operateForm,inline:!0}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShow=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("Confirm")])],1)],1),a("CardTable")],1)},ee=[],ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"form",attrs:{"label-width":"100px",model:t.form,inline:t.inline}},[t._l(t.formLabel,(function(e){return a("el-form-item",{key:e.label,attrs:{label:e.label}},["input"===e.type&&"StackName"===e.model?a("el-input",{model:{value:t.StackName,callback:function(e){t.StackName=e},expression:"StackName"}}):t._e(),"input"===e.type&&"TaskDescription"===e.model?a("el-input",{attrs:{placeholder:"Input"},model:{value:t.StackName,callback:function(e){t.StackName=e},expression:"StackName"}}):t._e(),"switch"===e.type?a("el-switch"):t._e(),"date"===e.type?a("el-date-picker",{attrs:{type:"date"}},["select"===e.type?a("el-select"):t._e(),t._l(e.opts,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],2):t._e()],1)})),a("el-form-item",[t._t("default")],2)],2)},se=[],oe={name:"CrudForm",props:{formLabel:Array,form:Object,inline:Boolean},data:function(){return{StackName:""}},methods:{change:function(){this.$forceUpdate()}}},re=oe,ne=(0,d.Z)(re,ae,se,!1,null,null,null),ie=ne.exports,le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(e){return t.handleAdd()}}},[t._v("Add")])],1)],1),a("el-dialog",{attrs:{title:"add"===t.operateType?"Add a card":"Update a card",visible:t.isDialogShown},on:{"update:visible":function(e){t.isDialogShown=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Card Name"}},[a("el-input",{model:{value:t.form.cardName,callback:function(e){t.$set(t.form,"cardName",e)},expression:"form.cardName"}})],1),a("el-form-item",{attrs:{label:"Stack",required:""}},[a("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"select one stack"},model:{value:t.form.stackID,callback:function(e){t.$set(t.form,"stackID",e)},expression:"form.stackID"}},[a("el-option",{directives:[{name:"show",rawName:"v-show",value:0===this.$store.state.user.stacks.length,expression:"this.$store.state.user.stacks.length === 0"}],attrs:{value:"item.name",disabled:""}},[t._v("You don't have any stack yet")]),t._l(this.$store.state.user.stacks,(function(e){return a("el-option",{key:e.stackID,attrs:{value:e.name}},[t._v(t._s(e.name))])}))],2)],1),a("el-form-item",{attrs:{label:"Card ID",hidden:""}},[a("el-input",{model:{value:t.form.cardID,callback:function(e){t.$set(t.form,"cardID",e)},expression:"form.cardID"}})],1),a("el-form-item",{attrs:{label:"Description"}},[a("el-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("el-form-item",{attrs:{label:"Extra Notes"}},[a("el-input",{model:{value:t.form.extra_notes,callback:function(e){t.$set(t.form,"extra_notes",e)},expression:"form.extra_notes"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isDialogShown=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onsubmit}},[t._v("Confirm")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cards.filter((function(e){return!t.cardSearch||e.name.toLowerCase().includes(t.cardSearch.toLowerCase())}))}},[a("el-table-column",{attrs:{sortable:"",label:"Stack",prop:"stackName"}}),a("el-table-column",{attrs:{sortable:"",label:"Card Name",prop:"name"}}),a("el-table-column",{attrs:{sortable:"",label:"Description",prop:"description"}}),a("el-table-column",{attrs:{sortable:"",label:"Extra Notes",prop:"extra_notes"}}),a("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-input",{attrs:{placeholder:"Type to search"},on:{click:function(a){return t.console.log(e)}},model:{value:t.cardSearch,callback:function(e){t.cardSearch=e},expression:"cardSearch"}})]}},{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("Edit")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("Delete")])]}}])})],1)],1)},ce=[],de={mounted:function(){this.getStacks()},components:{},data:function(){return{cardSearch:"",operateType:"add",isDialogShown:!1,form:{Email:"",cardName:"",cardID:void 0,description:"",extra_notes:"",stackID:void 0}}},computed:{cards:function(){for(var t=this.$store.state.user.cards,e=0;e<t.length;e++){var a=t[e]["stackID"];t[e]["stackName"]=this.getStackNameByStackId(a)}return t}},methods:{handleEdit:function(t,e){console.log(t,e),this.isDialogShown=!0,this.operateType="edit",this.form.cardName=e.name,this.form.Email=e.email,this.form.cardID=e.cardID,this.form.description=e.description,this.form.extra_notes=e.extra_notes,this.form.stackID=this.getStackNameByStackId(e.stackID)},handleDelete:function(t,e){var a=this,s=this;this.$confirm("Are you sure to delete this card?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){a.$store.commit("setLoading",!0),b()["delete"](b().defaults.baseURL+"/card.php?cardID="+e.cardID).then((function(t){s.$store.commit("setLoading",!1),t.data.status&&"success"===t.data.status&&(s.getCards(),s.$message({type:"success",message:"Deleted successfully"}))}))})).catch((function(){}))},handleAdd:function(){this.form.cardName="",this.form.Email=this.$store.state.user.email,this.form.description="",this.form.extra_notes="",this.form.stackID="",this.isDialogShown=!0,this.operateType="add"},getStackIdByStackName:function(t){for(var e=this.$store.state.user.stacks,a=0;a<e.length;a++)if(e[a].name===t)return e[a].stackID},getStackNameByStackId:function(t){for(var e=this.$store.state.user.stacks,a=0;a<e.length;a++)if(e[a].stackID===t)return e[a].name;return""},onsubmit:function(){var t=this;this.isDialogShown=!1,this.form.stackID=this.getStackIdByStackName(this.form.stackID),b()({method:"add"===this.operateType?"post":"put",url:b().defaults.baseURL+"/card.php",data:ht(this.form)}).then((function(e){t.$store.commit("setLoading",!1),e.data.status&&"success"===e.data.status?(t.getCards(),t.$message({type:"success",message:"add"===t.operateType?"Added successfully":"Updated successfully"})):e.data.status&&"error"===e.data.status&&t.$message({type:"error",message:e.data.error})}))}}},ue=de,me=(0,d.Z)(ue,le,ce,!1,null,null,null),fe=me.exports,pe={name:"StackEditPage",props:{msg:String},components:{CrudForm:ie,CardTable:fe},data:function(){return{operateType:"add",isShown:!1,operateFormLabel:[{model:"TaskName",label:"Task Name",type:"input"},{model:"TaskDescription",label:"Description",type:"input"},{}],operateForm:{name:"",addr:"",age:"",birth:""},formLabel:[{model:"keyword",label:"",type:"input"}],searchForm:{keyword:""}}},methods:{confirm:function(){},addUser:function(){this.isShown=!0},getList:function(){}},mounted:function(){var t=this;this.$store.commit("setLoading",!0),b().get(b().defaults.baseURL+"card.php?email="+this.$store.state.user.email).then((function(e){t.$store.commit("setCards",e.data.cards),console.log("card:",t.$store.state.user.cards)})).catch((function(t){console.log(t)})).finally((function(){t.$store.commit("setLoading",!1)}))}},he=pe,ge=(0,d.Z)(he,te,ee,!1,null,null,null),ke=ge.exports,ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editForm"},[a("el-dialog",{attrs:{title:"add"===t.operateType?"Add a task":"Update a task",visible:t.isShown},on:{"update:visible":function(e){t.isShown=e}}},[a("CrudForm",{ref:"form",attrs:{formLabel:t.operateFormLabel,form:t.operateForm,inline:!0}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShow=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("Confirm")])],1)],1),a("TaskTable")],1)},we=[],be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(e){return t.handleAdd()}}},[t._v("Add")])],1)],1),a("el-dialog",{attrs:{title:"add"===t.operateType?"Add a task":"Update a task",visible:t.isDialogShown},on:{"update:visible":function(e){t.isDialogShown=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Card",required:""}},[a("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"select one card"},model:{value:t.form.cardID,callback:function(e){t.$set(t.form,"cardID",e)},expression:"form.cardID"}},[a("el-option",{directives:[{name:"show",rawName:"v-show",value:0===this.$store.state.user.cards.length,expression:"this.$store.state.user.cards.length === 0"}],attrs:{value:"item.name",disabled:""}},[t._v("You don't have any card yet")]),t._l(this.$store.state.user.cards,(function(e){return a("el-option",{key:e.cardID,attrs:{value:e.name}},[t._v(t._s(e.name))])}))],2)],1),a("el-form-item",{attrs:{label:"Task Name"}},[a("el-input",{model:{value:t.form.taskName,callback:function(e){t.$set(t.form,"taskName",e)},expression:"form.taskName"}})],1),a("el-form-item",{attrs:{label:"Task Description"}},[a("el-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("el-form-item",{attrs:{label:"Due Date"}},[a("el-date-picker",{staticStyle:{float:"left"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"Select date and time","picker-options":t.pickerOptions},model:{value:t.form.due_date,callback:function(e){t.$set(t.form,"due_date",e)},expression:"form.due_date"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"add"!==t.operateType,expression:"operateType !== 'add'"}],attrs:{label:"Email",hidden:""}},[a("el-input",{model:{value:t.form.Email,callback:function(e){t.$set(t.form,"Email",e)},expression:"form.Email"}})],1),a("el-form-item",{attrs:{label:"Extra Notes"}},[a("el-input",{model:{value:t.form.extra_notes,callback:function(e){t.$set(t.form,"extra_notes",e)},expression:"form.extra_notes"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"add"!==t.operateType,expression:"operateType !== 'add'"}],attrs:{label:"Task ID",hidden:""}},[a("el-input",{model:{value:t.form.taskID,callback:function(e){t.$set(t.form,"taskID",e)},expression:"form.taskID"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isDialogShown=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onsubmit}},[t._v("Confirm")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tasks.filter((function(e){return!t.taskSearch||e.name.toLowerCase().includes(t.taskSearch.toLowerCase())}))}},[a("el-table-column",{attrs:{sortable:"",label:"Card",prop:"cardName"}}),a("el-table-column",{attrs:{sortable:"",label:"Task Name",prop:"name"}}),a("el-table-column",{attrs:{sortable:"",label:"Description",prop:"description"}}),a("el-table-column",{attrs:{sortable:"",label:"Due Date",prop:"due_date"}}),a("el-table-column",{attrs:{sortable:"",label:"Extra Notes",prop:"extra_notes"}}),a("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-input",{attrs:{placeholder:"Type to search"},on:{click:function(a){return t.console.log(e)}},model:{value:t.taskSearch,callback:function(e){t.taskSearch=e},expression:"taskSearch"}})]}},{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("Edit")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("Delete")])]}}])})],1)],1)},ye=[],$e={components:{},mounted:function(){this.getCards()},data:function(){return{taskSearch:"",operateType:"add",isDialogShown:!1,form:{Email:"",taskName:"",taskID:void 0,description:"",extra_notes:"",cardID:void 0,due_date:void 0},pickerOptions:{shortcuts:[{text:"Today",onClick:function(t){t.$emit("pick",new Date)}},{text:"Tomorrow",onClick:function(t){var e=new Date;e.setTime(e.getTime()+864e5),t.$emit("pick",e)}},{text:"A week later",onClick:function(t){var e=new Date;e.setTime(e.getTime()+6048e5),t.$emit("pick",e)}}]}}},computed:{tasks:function(){for(var t=this.$store.state.user.tasks,e=0;e<t.length;e++){var a=t[e]["cardID"];t[e]["cardName"]=this.getCardNameByCardId(a)}return t}},methods:{handleEdit:function(t,e){this.isDialogShown=!0,this.operateType="edit",this.form.taskName=e.name,this.form.Email=e.email,this.form.taskID=e.taskID,this.form.description=e.description,this.form.extra_notes=e.extra_notes,this.form.due_date=e.due_date,this.form.cardID=this.getCardNameByCardId(e.cardID)},handleDelete:function(t,e){var a=this,s=this;this.$confirm("Are you sure to delete this task?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){a.$store.commit("setLoading",!0),b()["delete"](b().defaults.baseURL+"/task.php?taskID="+e.taskID).then((function(t){s.$store.commit("setLoading",!1),t.data.status&&"success"===t.data.status&&(s.getCards(),s.getTasks(),s.$message({type:"success",message:"Deleted successfully"}))}))})).catch((function(){}))},handleAdd:function(){this.form.taskName="",this.form.Email=this.$store.state.user.email,this.form.description="",this.form.extra_notes="",this.form.cardID="",this.form.due_date=void 0,this.isDialogShown=!0,this.operateType="add"},getCardNameByCardId:function(t){for(var e=this.$store.state.user.cards,a=0;a<e.length;a++)if(e[a].cardID===t)return e[a].name;return""},onsubmit:function(){var t=this;this.isDialogShown=!1,this.form.cardID=this.getCardIdByCardName(this.form.cardID),b()({method:"add"===this.operateType?"post":"put",url:b().defaults.baseURL+"/task.php",data:ht(this.form)}).then((function(e){t.$store.commit("setLoading",!1),e.data.status&&"success"===e.data.status?(t.getCards(),t.getTasks(),t.$message({type:"success",message:"add"===t.operateType?"Added successfully":"Updated successfully"})):e.data.status&&"error"===e.data.status&&t.$message({type:"error",message:e.data.error})}))}}},De=$e,Se=(0,d.Z)(De,be,ye,!1,null,null,null),xe=Se.exports,Ce={name:"StackEditPage",props:{msg:String},components:{CrudForm:ie,TaskTable:xe},data:function(){return{operateType:"add",isShown:!1,operateFormLabel:[{model:"TaskName",label:"Task Name",type:"input"},{model:"TaskDescription",label:"Description",type:"input"},{}],operateForm:{name:"",addr:"",age:"",birth:""},formLabel:[{model:"keyword",label:"",type:"input"}],searchForm:{keyword:""}}},methods:{confirm:function(){},addUser:function(){this.isShown=!0},getList:function(){}},mounted:function(){var t=this;this.$store.commit("setLoading",!0),b().get(b().defaults.baseURL+"task.php?email="+this.$store.state.user.email).then((function(e){t.$store.commit("setTasks",e.data.tasks)})).catch((function(t){console.log(t)})).finally((function(){t.$store.commit("setLoading",!1)}))}},Te=Ce,_e=(0,d.Z)(Te,ve,we,!1,null,null,null),Ie=_e.exports,Le=new P.Z({routes:[{name:"UserHome",path:"/",component:ct,meta:{transition:"slide-left"}},{name:"SignupPage",path:"/signup",component:Dt,meta:{transition:"slide-right"}},{name:"LoginPage",path:"/login",component:Ft,meta:{transition:"slide-left"}},{name:"SettingPage",path:"/settings",component:jt,meta:{transition:"slide-right"}},{name:"StackEditPage",path:"/edit-stack",component:Xt,meta:{transition:"slide-right"}},{name:"CardEditPage",path:"/edit-card",component:ke,meta:{transition:"slide-right"}},{name:"TaskEditPage",path:"/edit-task",component:Ie,meta:{transition:"slide-right"}}]}),Ee=a(4665),Ne=a(329),Pe={methods:{},state:{token:"",email:"",loading:!1,loadingText:"",stacks:[],cards:[],tasks:[],isLoggedIn:!1,editing:"",displayingCardID:void 0,displayingTasks:[]},mutations:{setDisplayingTasks:function(t,e){t.displayingTasks=e},clearDisplayingTasks:function(t){t.displayingTasks=[]},setDisplayingCardID:function(t,e){t.displayingCardID=e},clearDisplayingCardID:function(t){t.displayingCardID=void 0},setLoadingText:function(t,e){t.loadingText=e},getStackNameByStackId:function(t){for(var e=this.$store.state.user.stacks,a=0;a<e.length;a++)if(e[a].stackID===t)return e[a].name;return-1},setToken:function(t,e){t.token=e,Ne.Z.set("token",e)},clearToken:function(t){t.token="",Ne.Z.remove("token")},getToken:function(t){t.token=t.token||Ne.Z.get("token")},setEmail:function(t,e){t.email=e,Ne.Z.set("email",e)},clearEmail:function(t){t.email="",Ne.Z.remove("email")},getEmail:function(t){t.email=t.email||Ne.Z.get("email")},setLoading:function(t,e){t.loading=e},clearTasks:function(t){t.tasks=[]},clearStacks:function(t){t.stacks=[]},setStacks:function(t,e){t.stacks=e},setCards:function(t,e){t.cards=e},clearCards:function(t){t.cards=[]},setTasks:function(t,e){t.tasks=e},setIsLoggedIn:function(t,e){t.isLoggedIn=e},setEditing:function(t,e){t.editing=e}}};s["default"].use(Ee.ZP);var Ue=new Ee.ZP.Store({modules:{user:Pe}}),Fe={api:"./php/"},Oe=a(187),Ae=a(2334),Re=a.n(Ae);function Be(){var t=["#00659d","#00abbc","#e2c58a","#fc8890","#b35d7f"];return t[Math.floor(Math.random()*t.length)]}s["default"].config.productionTip=!1,s["default"].use(T(),{locale:Oe.Z}),s["default"].use(N),s["default"].use(P.Z),s["default"].use(Re()),s["default"].prototype.getStacks=function(){var t=this;b().get(b().defaults.baseURL+"stack.php?email="+this.$store.state.user.email).then((function(e){t.$store.commit("setStacks",e.data.stacks)})).catch((function(t){console.log(t)}))},s["default"].prototype.getCards=function(){var t=this;b().get(b().defaults.baseURL+"card.php?email="+this.$store.state.user.email).then((function(e){t.$store.commit("setCards",e.data.cards),console.log("cards",t.$store.state.user.cards)})).catch((function(t){console.log(t)}))},s["default"].prototype.getTasks=function(){var t=this;b().get(b().defaults.baseURL+"task.php?email="+this.$store.state.user.email).then((function(e){for(var a=e.data.tasks,s=0;s<a.length;s++)a[s]["color"]=Be();console.log("processed tasks",a),t.$store.commit("setTasks",a),t.$store.commit("setDisplayingTasks",a),t.$store.commit("setDisplayingCardID",0)})).catch((function(t){console.log(t)}))},s["default"].prototype.getCardsByStackID=function(t){for(var e=this.$store.state.user.cards,a=[],s=0;s<e.length;s++)e[s]["stackID"]===t&&a.push(e[s]);return a},s["default"].prototype.updateAllData=function(){this.getStacks(),this.getCards(),this.getTasks()},s["default"].prototype.taskAxios=function(){var t=this;return b().request({url:b().defaults.baseURL+"task.php?email="+t.$store.state.user.email,withCredentials:!0})},s["default"].prototype.getCardIdByCardName=function(t){for(var e=this.$store.state.user.cards,a=0;a<e.length;a++)if(e[a].name===t)return e[a].cardID},s["default"].prototype.showReminder=function(){var t=this;setTimeout((function(){var e=t.$store.state.user.tasks.filter((function(t){return new Date(t["due_date"])<new Date}));t.$store.state.user.email&&t.$store.state.user.email.length>0&&t.$notify.info({title:"Reminder",dangerouslyUseHTMLString:!0,message:"You have "+"<h1>".concat(t.$store.state.user.tasks.length,"</h1>")+" tasks",duration:4500,offset:70}),setTimeout((function(){e.length>0&&t.$notify.warning({title:"Reminder",dangerouslyUseHTMLString:!0,message:"You have "+"<h1>".concat(e.length,"</h1>")+" tasks past due time",duration:5e3,offset:70})}),500)}),2e3)},b().defaults.baseURL=Fe.api,s["default"].prototype.apiConfig=Fe,Le.beforeEach((function(t,e,a){console.log("redirected from: ",e," to:",t),Ue.commit("getToken");var s=Ue.state.user.token;"undefined"===typeof s||null===s||0===s.length?"LoginPage"!==t.name&&"SignupPage"!==t.name&&"UserHome"!==t.name?(a({name:"LoginPage"}),console.log("blocked without token")):a():s&&("SignupPage"===t.name||"LoginPage"===t.name?(a({name:"UserHome"}),console.log("blocked with token",s)):"UserHome"===e.name&&"UserHome"!==t.name?(Ue.commit("setDisplayingCardID",void 0),a()):a())}));_.Z;new s["default"]({store:Ue,vuetify:N,render:function(t){return t(x)},router:Le}).$mount("#app")},1199:function(t,e,a){t.exports=a.p+"img/1.16e516be.png"},4151:function(t,e,a){t.exports=a.p+"img/2.f041e342.png"},3110:function(t,e,a){t.exports=a.p+"img/3.1ad2782f.png"},6949:function(t,e,a){t.exports=a.p+"img/logo.46dd0abe.png"}},e={};function a(s){var o=e[s];if(void 0!==o)return o.exports;var r=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,s,o,r){if(!s){var n=1/0;for(d=0;d<t.length;d++){s=t[d][0],o=t[d][1],r=t[d][2];for(var i=!0,l=0;l<s.length;l++)(!1&r||n>=r)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(i=!1,r<n&&(n=r));if(i){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[s,o,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){a.p=""}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,r,n=s[0],i=s[1],l=s[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(l)var d=l(a)}for(e&&e(s);c<n.length;c++)r=n[c],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(d)},s=self["webpackChunkvue_2"]=self["webpackChunkvue_2"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(2374)}));s=a.O(s)})();
//# sourceMappingURL=app-legacy.4fa113b9.js.map