(function(){"use strict";var t={8594:function(t,e,a){a(6992),a(8674),a(9601),a(7727),a(8309),a(7327),a(1539);var s=a(8935),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-aside",{attrs:{width:"auto"}},[a("NavMenu")],1),a("el-container",[a("el-header",{staticStyle:{height:"60px",padding:"0"}},[a("NavBar")],1),a("el-main",[a("router-view",{key:t.$route.fullPath,scopedSlots:t._u([{key:"default",fn:function(t){var e=t.Component,s=t.route;return[a("transition",{attrs:{name:s.meta.transition||"fade"}},[a(e,{tag:"component"})],1)]}}])})],1)],1)],1)],1)},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"line"}),a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex2,mode:"horizontal","background-color":"#005BBB","text-color":"#fff","active-text-color":"#ffffff",router:""}},[a("el-menu-item",{attrs:{index:"/"}},[t._v("DotPlan")]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!this.$store.state.user.isLoggedIn,expression:"!this.$store.state.user.isLoggedIn"}],attrs:{index:"signup",route:"signup"}},[t._v(" Sign Up ")]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!this.$store.state.user.isLoggedIn,expression:"!this.$store.state.user.isLoggedIn"}],attrs:{index:"login",route:"login"}},[t._v(" Log In ")]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.user.isLoggedIn,expression:"this.$store.state.user.isLoggedIn"}],staticStyle:{float:"right"}},[a("el-dropdown",[a("el-button",{staticStyle:{float:"right",color:"white"},attrs:{type:"primary"}},[t._v(" "+t._s(this.$store.state.user.email)+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("el-link",{attrs:{underline:!1},on:{click:t.goSettings}},[t._v("Settings")])],1),a("el-dropdown-item",[a("el-link",{attrs:{underline:!1},on:{click:t.logout}},[t._v("Log Out")])],1)],1)],1)],1),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.user.isLoggedIn,expression:"this.$store.state.user.isLoggedIn"}],staticStyle:{float:"right"},on:{click:t.logout}})],1)],1)},i=[],l={data:function(){return{activeIndex:"1",activeIndex2:"1"}},methods:{logout:function(){var t=this;this.$confirm("Are you sure to log out?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){t.$store.commit("clearToken"),t.$store.commit("clearEmail"),t.$store.commit("setIsLoggedIn",!1),t.$store.commit("setLoading",!0),t.$store.commit("clearTasks"),t.$store.commit("clearCards"),t.$store.commit("clearStacks"),t.$store.commit("clearDisplayingCardID"),t.$store.commit("clearDisplayingTasks"),t.$router.push({name:"UserHome"}),setTimeout((function(){t.$store.commit("setLoading",!1),t.$message({type:"success",message:"You have logged out"})}),1e3)})).catch((function(){}))},goSettings:function(){var t=this;"SettingPage"!==this.$route.name&&(this.$store.commit("setLoading",!0),setTimeout((function(){t.$store.commit("setLoading",!1),t.$router.push({name:"SettingPage"})}),500))}},computed:{}},c=l,d=a(1001),u=(0,d.Z)(c,n,i,!1,null,null,null),m=u.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"background-color":"#d9d8d7"},attrs:{id:"leftmenu"}},[a("el-radio-group",{staticStyle:{"padding-top":"10px"},model:{value:t.menuOpen,callback:function(e){t.menuOpen=e},expression:"menuOpen"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-menu",circle:""},on:{click:t.toggleNav}})],1),a("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{height:"93vh"},attrs:{"default-active":"2",collapse:!t.menuOpen,"background-color":"#d9d8d7",router:""},on:{open:t.handleOpen,close:t.handleClose}},[a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.isLoggedIn,expression:"isLoggedIn"}],attrs:{index:"/"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("User Home")])]),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.isLoggedIn,expression:"isLoggedIn"}],attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("Edit")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"edit-stack"}},[t._v("Stack")]),a("el-menu-item",{attrs:{index:"edit-card"}},[t._v("Card")]),a("el-menu-item",{attrs:{index:"edit-task"}},[t._v("Task")])],1)],2),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!t.isLoggedIn,expression:"!isLoggedIn"}],attrs:{index:"/"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("Introduction")])]),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.isLoggedIn,expression:"isLoggedIn"}],attrs:{index:"settings",route:"settings"}},[a("i",{staticClass:"el-icon-setting"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("Settings")])])],1)],1)},h=[],p=a(3019),g=a(4665),k={data:function(){return{num:1}},computed:(0,p.Z)((0,p.Z)({},(0,g.rn)("menu",{menuOpen:function(t){return t.open}})),{},{isLoggedIn:function(){return this.$store.state.user.isLoggedIn}}),methods:(0,p.Z)((0,p.Z)({},(0,g.nv)("menu",["toggleMenu"])),{},{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)},toggleNav:function(){this.toggleMenu(),this.num++},updateEdit:function(t){this.$store.commit("setEditing",t)}})},v=k,y=(0,d.Z)(v,f,h,!1,null,null,null),w=y.exports,b=a(6166),$=a.n(b),D=a(6762);s["default"].use(D.Z,$());var S={name:"App",components:{NavBar:m,NavMenu:w},data:function(){return{selection:1}},computed:{loading:function(){return this.$store.state.user.loading},loading_text:function(){return this.$store.state.user.loadingText}},methods:{reserve:function(){var t=this;this.loading=!0,setTimeout((function(){return t.loading=!1}),1e3)},updateLoginStatus:function(){var t=this;$().get($().defaults.baseURL+"session.php?token="+this.$store.state.user.token).then((function(e){t.$store.commit("setIsLoggedIn",e.data&&"success"===e.data.status),"success"===e.data.status&&(t.$store.commit("setLoadingText","Redirecting..."),t.$store.commit("setLoading",!0),setTimeout((function(){t.$store.commit("setLoading",!1),t.$store.commit("setLoadingText","Loading...")}),1e3)),e.data.email&&t.$store.commit("setEmail",e.data.email)})).catch((function(e){console.log(e),t.$store.commit("clearToken"),t.$store.commit("clearEmail"),t.$store.commit("clearTasks"),t.$store.commit("clearCards"),t.$store.commit("clearStacks"),t.$store.commit("setIsLoggedIn",!1),t.$store.commit("setLoading",!1),t.$router.push({name:"UserHome"})}))}},mounted:function(){var t=this;this.updateLoginStatus(),this.showReminder(),setTimeout((function(){t.getStacks(),t.getTasks(),t.getCards()}),1e3)}},x=S,C=(0,d.Z)(x,o,r,!1,null,null,null),_=C.exports,T=a(4549),I=a.n(T),L=a(3262),E=a(8209),N=a.n(E);a(243);s["default"].use(N());var P={},O=new(N())(P),F=a(2809),U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[this.$store.state.user.isLoggedIn?t._e():a("LandingPage"),t.showTasksFinishedResult?a("el-result",{staticStyle:{"padding-top":"200px"},attrs:{icon:"success",title:"You have finished all your tasks!"}}):t._e(),a("AnotherStack",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.user.isLoggedIn&&this.$store.state.user.tasks.length>0,expression:"this.$store.state.user.isLoggedIn && this.$store.state.user.tasks.length > 0"}],attrs:{displayTasksNumber:t.displayTasksNumber,angle:t.angle,height:t.height,width:t.width,border:t.border}}),a("el-row",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.user.isLoggedIn&&this.$store.state.user.tasks.length>0,expression:"this.$store.state.user.isLoggedIn && this.$store.state.user.tasks.length > 0"}]},[a("div",{staticStyle:{float:"left","margin-bottom":"10px"}},[a("el-radio-group",{on:{change:t.show},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[a("el-radio-button",{attrs:{label:"Past Due"}}),a("el-radio-button",{attrs:{label:"Due Soon"}})],1),a("el-divider",{attrs:{direction:"vertical"}}),a("el-button",{attrs:{type:"info"},on:{click:t.clearSelection}},[t._v("Clear")]),a("el-popover",{attrs:{placement:"top-end",width:"400",trigger:"hover"}},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("Number")]),a("el-slider",{attrs:{step:1,max:8,"show-stops":""},model:{value:t.displayTasksNumber,callback:function(e){t.displayTasksNumber=e},expression:"displayTasksNumber"}}),a("span",{staticClass:"demonstration"},[t._v("Angle")]),a("el-slider",{attrs:{step:5,max:80,"show-stops":""},model:{value:t.angle,callback:function(e){t.angle=e},expression:"angle"}}),a("span",{staticClass:"demonstration"},[t._v("Height")]),a("el-slider",{attrs:{step:10,min:250,max:500},model:{value:t.height,callback:function(e){t.height=e},expression:"height"}}),a("span",{staticClass:"demonstration"},[t._v("Width")]),a("el-slider",{attrs:{step:10,min:270,max:500},model:{value:t.width,callback:function(e){t.width=e},expression:"width"}}),a("span",{staticClass:"demonstration"},[t._v("Border")]),a("el-slider",{attrs:{step:2,min:0,max:30},model:{value:t.border,callback:function(e){t.border=e},expression:"border"}})],1),a("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v("Customize")])],1)],1)]),this.$store.state.user.isLoggedIn&&this.$store.state.user.tasks.length>0?a("TaskCascader",{on:{childOneClick:t.handleChildOneClick}}):t._e(),this.$store.state.user.isLoggedIn?a("DockContainer"):t._e()],1)},R=[],A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"dock-container":!0,open:t.dockOpen,"menu-open":t.menuOpen},on:{mouseover:function(e){t.hovered=!0},mouseleave:function(e){t.hovered=!1}}},[t.dockOpen?a("header",[a("span",{on:{click:t.toggleDock}},[t._v("Close")])]):t._e(),a("div",{staticClass:"stacks"},[a("div",[a("stack")],1),a("div",[a("stack")],1),a("div",[a("stack")],1),a("div",[a("stack")],1),a("div",[a("stack")],1),a("div",[a("stack")],1),a("div",[a("stack")],1),a("div",[a("stack")],1),a("div",[a("stack")],1),a("div",[a("stack")],1),a("div",[a("stack")],1),a("div",[a("stack")],1)]),a("div",{class:{overlay:!0,open:t.showOverlay},on:{click:t.toggleDock}},[a("p",[t._v("Open Dock")])])])},Z=[],B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-stack",on:{wheel:function(e){return t.scrollCards(e)}}},[a("vue-card-stack",{key:JSON.stringify(t.cards),staticStyle:{"padding-top":"100px"},attrs:{cards:t.cards,"stack-width":360,"card-width":280,speed:.5},scopedSlots:t._u([{key:"card",fn:function(e){var s=e.card;return[a("div",{staticStyle:{width:"100%",height:"100%","border-radius":"8px",padding:"8px"},style:{background:s.background},on:{click:function(e){t.clicked[s.data]=!0},mouseleave:function(e){t.clicked[s.data]=!1}}})]}}])})],1)},M=[],j=(a(3290),{name:"CardsStack",data:function(){return{SchoolName:"aaa",address:"bbb",clicked:Array(5).fill(!1),hidden:!0,testCards:[{due_date:"Today",extra_notes:"Omg do the thing",name:"First Card"},{due_date:void 0,extra_notes:void 0,name:"Second Card"},{due_date:"Tomorrow",extra_notes:"Some notes",name:"Third Card"},{due_date:"Tomorrow",extra_notes:"Some notes",name:"Fourth Card"},{due_date:"Tomorrow",extra_notes:"Some notes",name:"Fifth Card"}]}},computed:{cards:function(){return this.initCards(this.testCards)},isLoggedIn:function(){return this.$store.state.user.token&&this.$store.state.user.token.length>0}},methods:{getRandomColor:function(){var t=["#00659d","#00abbc","#e2c58a","#fc8890","#b35d7f"];return t[Math.floor(Math.random()*t.length)]},initCards:function(t){for(var e=[],a=0;a<t.length;a++){var s={};s["background"]=this.getRandomColor(),s["data"]=t[a],e.push(s)}return e},scrollCards:function(t){t.preventDefault();var e=this.$refs.nextButton,a=this.$refs.prevButton;t.deltaY>0?e.click():a.click()},updateMouseover:function(t){this.clicked[t]=!0},updateMouseLeave:function(t){this.clicked[t]=!1},getAllTasks:function(){return $().request({url:$().defaults.baseURL+"session.php?param=tasks",withCredentials:!0})}},components:{VueCardStack:L.Z}}),H=j,z=(0,d.Z)(H,B,M,!1,null,"5d82769a",null),q=z.exports,V={name:"DockContainer",components:{Stack:q},data:function(){return{dockOpen:!1,hovered:!1}},computed:(0,p.Z)((0,p.Z)({},(0,g.rn)("menu",{menuOpen:function(t){return t.open}})),{},{showOverlay:function(){return this.hovered&&!this.dockOpen}}),methods:{toggleDock:function(){this.dockOpen=!this.dockOpen}}},Y=V,W=(0,d.Z)(Y,A,Z,!1,null,"e363e768",null),K=W.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",[a("el-carousel",{staticStyle:{width:"80%",margin:"0 auto"},attrs:{interval:2500,arrow:"hover",height:"50vh"}},t._l(t.desciptions,(function(t){return a("el-carousel-item",{key:t.desc},[a("img",{staticStyle:{width:"100%",height:"auto"},attrs:{src:t.imgSrc}})])})),1)],1)],1),a("el-row",{staticStyle:{width:"80%",margin:"0 auto","margin-top":"30px"}},[a("el-col",{attrs:{span:1}},[a("img",{staticStyle:{width:"auto",height:"auto","margin-top":"30px"},attrs:{src:t.logoImg}})]),a("el-col",{attrs:{span:13,offset:5}},[a("h1",{staticStyle:{"font-weight":"bold","font-size":"30px"}},[t._v(" Time Management APP")]),a("br"),a("br"),a("h3",{staticStyle:{color:"gray","font-weight":"lighter","text-align":"left"}},[t._v(" Effective time management begins with clear on exactly how you manage your time on your tasks. "),a("br"),a("br"),t._v(" If you are struggling to manage time then DotPlan app will help you go further, "),a("br"),a("br"),t._v(" It has simple user interface that easily customizable based on what you need for everyday use. ")])])],1)],1)},J=[],X={components:{},data:function(){return{isCollapse:!1,num:1,logoImg:a(6949),desciptions:[{desc:"aaa",imgSrc:a(1199)},{desc:"bbb",imgSrc:a(4151)},{desc:"ccc",imgSrc:a(3110)}]}}},Q=X,tt=(0,d.Z)(Q,G,J,!1,null,"7975b010",null),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-cascader-panel",{attrs:{options:t.stackOption,"show-all-levels":!1},on:{change:t.handleChange}})},st=[],ot={mounted:function(){this.getStacks()},computed:{stackOption:function(){var t=[],e=this.$store.state.user.stacks;if(0!==e.length){var a={value:"All Tasks",label:"All Tasks"};t.push(a)}for(var s=0;s<e.length;s++){var o={};o["value"]=e[s].name,o["label"]=e[s].name,o["children"]=[];var r=this.getCardsByStackID(e[s].stackID);if(0===r.length){var n={value:"No cards under this stack",label:"No cards under this stack",disabled:!0};o["children"].push(n)}else for(var i=0;i<r.length;i++){var l={};l["value"]=r[i].name,l["label"]=r[i].name,o["children"].push(l)}t.push(o)}return t}},data:function(){return{}},methods:{handleChange:function(t){var e=this;if("All Tasks"!==t[0]){var a=t[1],s=this.getCardIdByCardName(a);this.$emit("childOneClick"),this.$store.commit("setLoading",!0),setTimeout((function(){e.$store.commit("setLoading",!1),e.$store.commit("setDisplayingCardID",s),e.$store.commit("setDisplayingTasks",e.$store.state.user.tasks.filter((function(t){return t.cardID===s})))}),400)}else setTimeout((function(){e.$store.commit("setLoading",!1),e.$store.commit("setDisplayingCardID",0),e.$store.commit("setDisplayingTasks",e.$store.state.user.tasks)}),400)}}},rt=ot,nt=(0,d.Z)(rt,at,st,!1,null,null,null),it=nt.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.updated?a("carousel-3d",{directives:[{name:"loading",rawName:"v-loading",value:t.stackLoading,expression:"stackLoading"}],staticStyle:{"margin-top":"20px","margin-bottom":"20px"},attrs:{"element-loading-text":"You don't have any tasks in this card","element-loading-spinner":"el-icon-timer",controlsVisible:"",display:this.displayTasksNumber,perspective:this.angle,height:this.height,width:this.width,border:this.border}},t._l(t.displayingTasks,(function(e,s){return a("slide",{key:e.taskID,style:{"background-color":e.color},attrs:{index:s}},[a("el-row",{staticStyle:{margin:"10px",padding:"10 auto"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""}}),a("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:""}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""}})],1),a("el-descriptions",{staticStyle:{padding:"10px"},attrs:{direction:"horizontal",column:1,border:"",size:"medium"}},[a("el-descriptions-item",{attrs:{label:"Task"}},[t._v(" "+t._s(e.name)+" ")]),a("el-descriptions-item",{attrs:{label:"Extra Notes"}},[t._v(t._s(e.extra_notes))]),a("el-descriptions-item",{attrs:{label:"Due date",span:2}},[t._v(t._s(e.due_date))])],1)],1)})),1):t._e()},ct=[],dt={props:["displayTasksNumber","angle","height","width","border"],mounted:function(){var t=this;setInterval((function(){t.displayingTasks=t.$store.state.user.displayingTasks}),500)},data:function(){return{updated:!0,displayingTasks:[]}},watch:{displayingTasks:function(){var t=this;this.updated=!1,this.$nextTick((function(){t.updated=!0}))}},computed:{tasks:function(){var t=this.$store.state.user.displayingCardID;return this.$store.state.user.tasks.filter((function(e){return e.cardID===t}))},stackLoading:function(){if(this.$store.state.user.displayingTasks.length>0)return!1;var t=this.$store.state.user.displayingCardID;if(void 0===t)return!0;var e=this.$store.state.user.tasks.filter((function(e){return e.cardID===t}));return 0===e.length}}},ut=dt,mt=(0,d.Z)(ut,lt,ct,!1,null,null,null),ft=mt.exports,ht={components:{DockContainer:K,LandingPage:et,TaskCascader:it,AnotherStack:ft},mounted:function(){var t=this;this.updateAllData(),setInterval((function(){t.showTasksFinishedResult=t.$store.state.user.isLoggedIn&&0===t.$store.state.user.tasks.length}),100)},data:function(){return{filter:"",selectionCleared:!0,showTasksFinishedResult:!1,displayTasksNumber:5,angle:35,height:270,width:360,border:2}},methods:{handleChildOneClick:function(){this.filter=""},show:function(){if("Past Due"===this.filter){var t=this.$store.state.user.displayingCardID,e=0===t?this.$store.state.user.tasks:this.$store.state.user.tasks.filter((function(e){return e["cardID"]===t}));this.$store.commit("setDisplayingTasks",e.filter((function(t){return new Date(t["due_date"])<new Date})))}if("Due Soon"===this.filter){var a=this.$store.state.user.displayingCardID,s=0===a?this.$store.state.user.tasks:this.$store.state.user.tasks.filter((function(t){return t["cardID"]===a}));this.$store.commit("setDisplayingTasks",s.filter((function(t){return new Date(t["due_date"])>new Date})))}},clearSelection:function(){this.filter="";var t=this.$store.state.user.displayingCardID,e=0===t?this.$store.state.user.tasks:this.$store.state.user.tasks.filter((function(e){return e["cardID"]===t}));this.$store.commit("setDisplayingTasks",e)}},computed:{hasTasks:function(){return this.$store.state.user.tasks.length>0},tasksDisplaying:function(){return void 0!==this.$store.state.displayingCardID},showRadio:function(){return this.$store.state.user.isLoggedIn&&void 0===this.$store.state.user.displayingCardID||this.$store.state.user.displayingTasks.length>0}}},pt=ht,gt=(0,d.Z)(pt,U,R,!1,null,null,null),kt=gt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card",staticStyle:{"margin-left":"auto","margin-right":"auto",width:"50%","margin-top":"10vh"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("Sign Up")])]),a("SignupForm")],1)],1)},yt=[],wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm.apply(null,arguments)}}},[a("el-form",{ref:"elForm",attrs:{model:t.formData,rules:t.rules,size:"small","label-width":"100px","label-position":"left"}},[a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Email",prop:"Email"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"Email",clearable:""},model:{value:t.formData.Email,callback:function(e){t.$set(t.formData,"Email",e)},expression:"formData.Email"}})],1)],1)],1),a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Password",prop:"Password"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"Password",clearable:"","show-password":""},model:{value:t.formData.Password,callback:function(e){t.$set(t.formData,"Password",e)},expression:"formData.Password"}})],1)],1)],1),a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"138px",label:"Confirm Password",prop:"ConfirmPassword"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"Confirm Password",clearable:"","show-password":""},model:{value:t.formData.ConfirmPassword,callback:function(e){t.$set(t.formData,"ConfirmPassword",e)},expression:"formData.ConfirmPassword"}})],1)],1)],1),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("Sign Up")]),a("el-button",{on:{click:t.resetForm}},[t._v("Reset")])],1)],1)],1)},bt=[],$t=a(8143);a(9720),a(2222);function Dt(t){for(var e={},a=0,s=Object.entries(t);a<s.length;a++){var o=(0,$t.Z)(s[a],2),r=o[0],n=o[1];console.log("".concat(r,": ").concat(n)),e[r]=n}return e}var St={components:{},props:[],data:function(){return{formData:{Email:void 0,Password:void 0,ConfirmPassword:void 0},rules:{Email:[{required:!0,message:"Email cannot be empty",trigger:"blur"},{pattern:/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.(com|cn|edu))+$/,message:"Wrong Email format",trigger:"blur"}],Password:[{required:!0,message:"Password is required",trigger:"blur"}],ConfirmPassword:[{required:!0,message:"Password cannot be empty",trigger:"blur"}]}}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{submitForm:function(){var t=this,e=this;this.$refs["elForm"].validate((function(a){a&&(t.checkForm(t.formData)?(console.log(Dt(t.formData)),$().post($().defaults.baseURL+"/signup.php",Dt(t.formData)).then((function(t){"error"===t.data.status?e.showError(t.data.error):(e.$store.commit("setLoading",!0),setTimeout((function(){e.$store.commit("setLoading",!1),e.$router.push({name:"UserHome"}),e.$message({message:"Welcome!",type:"success"})}),1e3),e.$store.commit("setToken",t.data.token),e.$store.commit("setEmail",t.data.email),e.$store.commit("setIsLoggedIn",!0))})).catch((function(t){console.log(t),e.showError("Server is down")}))):t.showError("Passwords do not match"))}))},resetForm:function(){this.$refs["elForm"].resetFields()},checkForm:function(t){var e=t.Password,a=t.ConfirmPassword;return e===a},showError:function(t){this.$message.error(t)},serializeFormData:function(t){var e="";return e+="Email="+t.Email,e+="&",e+="Password="+t.Password,e}}},xt=St,Ct=(0,d.Z)(xt,wt,bt,!1,null,null,null),_t=Ct.exports,Tt={components:{SignupForm:_t}},It=Tt,Lt=(0,d.Z)(It,vt,yt,!1,null,"73ccbe54",null),Et=Lt.exports,Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card",staticStyle:{"margin-left":"auto","margin-right":"auto",width:"50%","margin-top":"10vh"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("Login")])]),a("LoginForm")],1)],1)},Pt=[],Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm.apply(null,arguments)}}},[a("el-form",{ref:"elForm",attrs:{model:t.formData,rules:t.rules,size:"small","label-width":"100px","label-position":"left"}},[a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Email",prop:"Email"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"Email",clearable:""},model:{value:t.formData.Email,callback:function(e){t.$set(t.formData,"Email",e)},expression:"formData.Email"}})],1)],1)],1),a("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Password",prop:"Password"}},[a("el-input",{style:{width:"100%"},attrs:{placeholder:"Password",clearable:"","show-password":""},model:{value:t.formData.Password,callback:function(e){t.$set(t.formData,"Password",e)},expression:"formData.Password"}})],1)],1)],1),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("Log In")])],1)],1)],1)},Ft=[],Ut={components:{},data:function(){return{formData:{Email:void 0,Password:void 0},rules:{Email:[{required:!0,message:"Email cannot be empty",trigger:"blur"},{pattern:/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.(com|cn|edu))+$/,message:"Wrong Email format",trigger:"blur"}],Password:[{required:!0,message:"Password is required",trigger:"blur"}]}}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{submitForm:function(){var t=this,e=this;this.$refs["elForm"].validate((function(a){a&&$().post($().defaults.baseURL+"/login.php",Dt(t.formData)).then((function(t){"success"===t.data.status?(e.$store.commit("setLoading",!0),e.$router.push({name:"UserHome"}),setTimeout((function(){e.$store.commit("setLoading",!1),e.$message({message:"Login Success!",type:"success"})}),1e3),e.$store.commit("setToken",t.data.token),e.$store.commit("setEmail",t.data.email),e.$store.commit("setIsLoggedIn",!0)):"error"===t.data.status&&e.showError(t.data.error)})).catch((function(t){console.log(t),e.showError("Server is down")}))}))},showError:function(t){this.$message.error(t)}}},Rt=Ut,At=(0,d.Z)(Rt,Ot,Ft,!1,null,null,null),Zt=At.exports,Bt={components:{LoginForm:Zt},data:function(){return{url:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}}},Mt=Bt,jt=(0,d.Z)(Mt,Nt,Pt,!1,null,"7193d3d6",null),Ht=jt.exports,zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card",staticStyle:{"margin-left":"auto","margin-right":"auto",width:"50%","margin-top":"10vh"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("i",{staticClass:"el-icon-share"}),a("span",[a("b",[t._v(" Settings")])])]),a("el-row",[a("el-link",{attrs:{href:t.icsFile,download:"DotPlanEvents.ics"}},[a("el-button",{staticStyle:{width:"230px"},attrs:{type:"primary",icon:"el-icon-download",plain:""},on:{click:t.generateIcsFile}},[t._v("Export my tasks")])],1)],1),a("el-row",[a("el-button",{staticStyle:{width:"230px","margin-top":"15px"},attrs:{type:"primary",icon:"el-icon-edit",plain:""},on:{click:t.handleUpdatePassword}},[t._v("Change my password")])],1),a("el-row",[a("el-button",{staticStyle:{width:"230px","margin-top":"15px"},attrs:{type:"danger",icon:"el-icon-delete",plain:""},on:{click:t.handleDeleteUser}},[t._v("Delete my account")])],1)],1),a("el-dialog",{staticStyle:{"margin-left":"auto","margin-right":"auto",width:"65%"},attrs:{title:"Change password",visible:t.isDialogShown},on:{"update:visible":function(e){t.isDialogShown=e}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,"label-width":"180px"}},[a("el-form-item",{attrs:{label:"Email",hidden:""}},[a("el-input",{model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}})],1),a("el-form-item",{attrs:{label:"Old password",prop:"password"}},[a("el-input",{attrs:{clearable:"","show-password":""},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),a("el-form-item",{attrs:{label:"New password",prop:"newPassword"}},[a("el-input",{attrs:{clearable:"","show-password":""},model:{value:t.formData.newPassword,callback:function(e){t.$set(t.formData,"newPassword",e)},expression:"formData.newPassword"}})],1),a("el-form-item",{attrs:{label:"Confirm password",prop:"confirmPassword"}},[a("el-input",{attrs:{clearable:"","show-password":""},model:{value:t.formData.confirmPassword,callback:function(e){t.$set(t.formData,"confirmPassword",e)},expression:"formData.confirmPassword"}})],1)],1),a("el-button",{on:{click:function(e){t.isDialogShown=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onsubmit}},[t._v("Confirm")])],1)],1)},qt=[],Vt=(a(4916),a(3123),a(9600),a(2526),a(1817),a(8783),a(3948),a(285),a(1637),{components:{},data:function(){return{rules:{password:[{required:!0,message:"Old password is required",trigger:"blur"}],newPassword:[{required:!0,message:"Password cannot be empty",trigger:"blur"}],confirmPassword:[{required:!0,message:"Password cannot be empty",trigger:"blur"}]},isDialogShown:!1,icsFile:null,selection:1,loading:!1,formData:{email:void 0,password:void 0,newPassword:void 0,confirmPassword:void 0}}},computed:{email:function(){return this.$store.state.user.email}},methods:{handleDeleteUser:function(){var t=this,e=this;this.$confirm("This will permanently delete your account. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){$()["delete"]($().defaults.baseURL+"/login.php?email="+t.email).then((function(t){e.$store.commit("setLoading",!1),t.data.status&&"success"===t.data.status&&(e.$store.commit("clearToken"),e.$store.commit("clearEmail"),e.$store.commit("clearTasks"),e.$store.commit("clearCards"),e.$store.commit("clearStacks"),e.$store.commit("setIsLoggedIn",!1),e.$store.commit("setLoading",!1),e.$router.push({name:"UserHome"}),e.$message({type:"success",message:"Deleted successfully"}))}))})).catch((function(){}))},onsubmit:function(){var t=this;this.formData.email=this.email,this.formData.newPassword===this.formData.confirmPassword?(this.isDialogShown=!1,$().put($().defaults.baseURL+"/login.php",Dt(this.formData)).then((function(e){"success"===e.data.status?(t.$store.commit("setLoading",!0),setTimeout((function(){t.$store.commit("setLoading",!1),t.$message({message:"Password updated!",type:"success"})}),1e3)):"error"===e.data.status&&(t.$store.commit("setLoading",!0),setTimeout((function(){t.$store.commit("setLoading",!1),t.$message.error(e.data.error)}),1e3))})).catch((function(e){t.$message.error("Server is down"),t.$message.error(e)}))):this.$message.error("Passwords do not match")},handleUpdatePassword:function(){this.isDialogShown=!0,this.formData.email=this.email,this.formData.password=void 0,this.formData.newPassword=void 0,this.formData.confirmPassword=void 0},reserve:function(){var t=this;this.loading=!0,setTimeout((function(){return t.loading=!1}),2e3)},convertDate:function(t){var e=new Date(t).toISOString();return e=e.split("T")[0],e=e.split("-"),e=e.join(""),e},getNextTaskCounter:function(){var t=parseInt(localStorage.userTaskCounter)+1;return localStorage.userTaskCounter=t,t},addEventDataToICSFile:function(t){var e="BEGIN:VEVENT\n",a="".concat(this.email).concat(t.taskID,"@cse442NohTypDotPlan"),s=null,o=this.convertDate(Date.now());null!=t["due_date"]&&(console.log("Task with due date!"),s=this.convertDate(t["due_date"]));var r=t["name"],n=t["description"];return e+="UID:".concat(a,"\n")+"DTSTART:".concat(o,"\n")+"SUMMARY:".concat(r,"\n")+"DESCRIPTION:".concat(n,"\n"),null!=s&&(e+="DTEND:".concat(s,"\n")),e+="END:VEVENT\n",e},generateIcsFile:function(t){var e=this.$store.state.user.tasks;if(this.$store.state.user.tasks&&0!==this.$store.state.user.tasks.length){for(var a="BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Dot-Plan-Cal//EN\nCALSCALE:GREGORIAN\nMETHOD:PUBLISH\n",s=0;s<e.length;s++)a+=this.addEventDataToICSFile(e[s]);a+="END:VCALENDAR\n";var o=new File([a],"DotPlanEvents.ics",{type:"text/calendar"});return null!==this.icsFile&&window.URL.revokeObjectURL(this.icsFile),this.icsFile=window.URL.createObjectURL(o),this.icsFile}t&&this.$message({message:"You have no tasks to export!",type:"warning"})}},mounted:function(){var t=this;setTimeout((function(){t.generateIcsFile(!1)}),800)}}),Yt=Vt,Wt=(0,d.Z)(Yt,zt,qt,!1,null,"5cca56e1",null),Kt=Wt.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editForm"},[a("StackTable")],1)},Jt=[],Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(e){return t.handleAdd()}}},[t._v("Add")])],1)],1),a("el-dialog",{attrs:{title:"add"===t.operateType?"Add a stack":"Update a stack",visible:t.isDialogShown},on:{"update:visible":function(e){t.isDialogShown=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Stack Name"}},[a("el-input",{model:{value:t.form.stackName,callback:function(e){t.$set(t.form,"stackName",e)},expression:"form.stackName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isDialogShown=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onsubmit}},[t._v("Confirm")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.stacks.filter((function(e){return!t.stackSearch||e.name.toLowerCase().includes(t.stackSearch.toLowerCase())}))}},[a("el-table-column",{attrs:{sortable:"",label:"Stack",prop:"name"}}),a("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-input",{attrs:{placeholder:"Type to search"},on:{click:function(a){return t.console.log(e)}},model:{value:t.stackSearch,callback:function(e){t.stackSearch=e},expression:"stackSearch"}})]}},{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("Edit")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("Delete")])]}}])})],1)],1)},Qt=[],te={components:{},data:function(){return{stackSearch:"",operateType:"add",isDialogShown:!1,form:{Email:"",stackName:"",stackID:-1}}},computed:{stacks:function(){return this.$store.state.user.stacks}},methods:{handleEdit:function(t,e){console.log(t,e),this.isDialogShown=!0,this.operateType="edit",this.form.stackName=e.name,this.form.Email=e.email,this.form.stackID=e.stackID},handleDelete:function(t,e){var a=this,s=this;this.$confirm("Are you sure to delete this stack?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){a.$store.commit("setLoading",!0),$()["delete"]($().defaults.baseURL+"/stack.php?stackID="+e.stackID).then((function(t){s.$store.commit("setLoading",!1),t.data.status&&"success"===t.data.status&&(s.getStacks(),s.getCards(),s.$message({type:"success",message:"Deleted successfully"}))}))})).catch((function(){}))},handleAdd:function(){this.form.stackName="",this.form.Email=this.$store.state.user.email,this.isDialogShown=!0,this.operateType="add"},onsubmit:function(){var t=this;this.isDialogShown=!1,$()({method:"add"===this.operateType?"post":"put",url:$().defaults.baseURL+"/stack.php",data:Dt(this.form)}).then((function(e){t.$store.commit("setLoading",!1),e.data.status&&"success"===e.data.status?(t.getStacks(),t.$message({type:"success",message:"add"===t.operateType?"Added successfully":"Updated successfully"})):e.data.status&&"error"===e.data.status&&t.$message({type:"error",message:e.data.error})}))}},mounted:function(){var t=this;this.$store.commit("setLoading",!0),$().get($().defaults.baseURL+"stack.php?email="+this.$store.state.user.email).then((function(e){t.$store.commit("setStacks",e.data.stacks)})).catch((function(t){console.log(t)})).finally((function(){t.$store.commit("setLoading",!1)}))}},ee=te,ae=(0,d.Z)(ee,Xt,Qt,!1,null,null,null),se=ae.exports,oe={name:"StackEditPage",props:{msg:String},components:{StackTable:se},data:function(){return{operateType:"add",isDialogShown:!1}},methods:{}},re=oe,ne=(0,d.Z)(re,Gt,Jt,!1,null,null,null),ie=ne.exports,le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editForm"},[a("el-dialog",{attrs:{title:"add"===t.operateType?"Add a task":"Update a task",visible:t.isShown},on:{"update:visible":function(e){t.isShown=e}}},[a("CrudForm",{ref:"form",attrs:{formLabel:t.operateFormLabel,form:t.operateForm,inline:!0}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShow=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("Confirm")])],1)],1),a("CardTable")],1)},ce=[],de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{ref:"form",attrs:{"label-width":"100px",model:t.form,inline:t.inline}},[t._l(t.formLabel,(function(e){return a("el-form-item",{key:e.label,attrs:{label:e.label}},["input"===e.type&&"StackName"===e.model?a("el-input",{model:{value:t.StackName,callback:function(e){t.StackName=e},expression:"StackName"}}):t._e(),"input"===e.type&&"TaskDescription"===e.model?a("el-input",{attrs:{placeholder:"Input"},model:{value:t.StackName,callback:function(e){t.StackName=e},expression:"StackName"}}):t._e(),"switch"===e.type?a("el-switch"):t._e(),"date"===e.type?a("el-date-picker",{attrs:{type:"date"}},["select"===e.type?a("el-select"):t._e(),t._l(e.opts,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],2):t._e()],1)})),a("el-form-item",[t._t("default")],2)],2)},ue=[],me={name:"CrudForm",props:{formLabel:Array,form:Object,inline:Boolean},data:function(){return{StackName:""}},methods:{change:function(){this.$forceUpdate()}}},fe=me,he=(0,d.Z)(fe,de,ue,!1,null,null,null),pe=he.exports,ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(e){return t.handleAdd()}}},[t._v("Add")])],1)],1),a("el-dialog",{attrs:{title:"add"===t.operateType?"Add a card":"Update a card",visible:t.isDialogShown},on:{"update:visible":function(e){t.isDialogShown=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Card Name"}},[a("el-input",{model:{value:t.form.cardName,callback:function(e){t.$set(t.form,"cardName",e)},expression:"form.cardName"}})],1),a("el-form-item",{attrs:{label:"Stack",required:""}},[a("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"select one stack"},model:{value:t.form.stackID,callback:function(e){t.$set(t.form,"stackID",e)},expression:"form.stackID"}},[a("el-option",{directives:[{name:"show",rawName:"v-show",value:0===this.$store.state.user.stacks.length,expression:"this.$store.state.user.stacks.length === 0"}],attrs:{value:"item.name",disabled:""}},[t._v("You don't have any stack yet")]),t._l(this.$store.state.user.stacks,(function(e){return a("el-option",{key:e.stackID,attrs:{value:e.name}},[t._v(t._s(e.name))])}))],2)],1),a("el-form-item",{attrs:{label:"Card ID",hidden:""}},[a("el-input",{model:{value:t.form.cardID,callback:function(e){t.$set(t.form,"cardID",e)},expression:"form.cardID"}})],1),a("el-form-item",{attrs:{label:"Description"}},[a("el-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("el-form-item",{attrs:{label:"Extra Notes"}},[a("el-input",{model:{value:t.form.extra_notes,callback:function(e){t.$set(t.form,"extra_notes",e)},expression:"form.extra_notes"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isDialogShown=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onsubmit}},[t._v("Confirm")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cards.filter((function(e){return!t.cardSearch||e.name.toLowerCase().includes(t.cardSearch.toLowerCase())}))}},[a("el-table-column",{attrs:{sortable:"",label:"Stack",prop:"stackName"}}),a("el-table-column",{attrs:{sortable:"",label:"Card Name",prop:"name"}}),a("el-table-column",{attrs:{sortable:"",label:"Description",prop:"description"}}),a("el-table-column",{attrs:{sortable:"",label:"Extra Notes",prop:"extra_notes"}}),a("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-input",{attrs:{placeholder:"Type to search"},on:{click:function(a){return t.console.log(e)}},model:{value:t.cardSearch,callback:function(e){t.cardSearch=e},expression:"cardSearch"}})]}},{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("Edit")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("Delete")])]}}])})],1)],1)},ke=[],ve={mounted:function(){this.getStacks()},components:{},data:function(){return{cardSearch:"",operateType:"add",isDialogShown:!1,form:{Email:"",cardName:"",cardID:void 0,description:"",extra_notes:"",stackID:void 0}}},computed:{cards:function(){for(var t=this.$store.state.user.cards,e=0;e<t.length;e++){var a=t[e]["stackID"];t[e]["stackName"]=this.getStackNameByStackId(a)}return t}},methods:{handleEdit:function(t,e){console.log(t,e),this.isDialogShown=!0,this.operateType="edit",this.form.cardName=e.name,this.form.Email=e.email,this.form.cardID=e.cardID,this.form.description=e.description,this.form.extra_notes=e.extra_notes,this.form.stackID=this.getStackNameByStackId(e.stackID)},handleDelete:function(t,e){var a=this,s=this;this.$confirm("Are you sure to delete this card?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){a.$store.commit("setLoading",!0),$()["delete"]($().defaults.baseURL+"/card.php?cardID="+e.cardID).then((function(t){s.$store.commit("setLoading",!1),t.data.status&&"success"===t.data.status&&(s.getCards(),s.$message({type:"success",message:"Deleted successfully"}))}))})).catch((function(){}))},handleAdd:function(){this.form.cardName="",this.form.Email=this.$store.state.user.email,this.form.description="",this.form.extra_notes="",this.form.stackID="",this.isDialogShown=!0,this.operateType="add"},getStackIdByStackName:function(t){for(var e=this.$store.state.user.stacks,a=0;a<e.length;a++)if(e[a].name===t)return e[a].stackID},getStackNameByStackId:function(t){for(var e=this.$store.state.user.stacks,a=0;a<e.length;a++)if(e[a].stackID===t)return e[a].name;return""},onsubmit:function(){var t=this;this.isDialogShown=!1,this.form.stackID=this.getStackIdByStackName(this.form.stackID),$()({method:"add"===this.operateType?"post":"put",url:$().defaults.baseURL+"/card.php",data:Dt(this.form)}).then((function(e){t.$store.commit("setLoading",!1),e.data.status&&"success"===e.data.status?(t.getCards(),t.$message({type:"success",message:"add"===t.operateType?"Added successfully":"Updated successfully"})):e.data.status&&"error"===e.data.status&&t.$message({type:"error",message:e.data.error})}))}}},ye=ve,we=(0,d.Z)(ye,ge,ke,!1,null,null,null),be=we.exports,$e={name:"StackEditPage",props:{msg:String},components:{CrudForm:pe,CardTable:be},data:function(){return{operateType:"add",isShown:!1,operateFormLabel:[{model:"TaskName",label:"Task Name",type:"input"},{model:"TaskDescription",label:"Description",type:"input"},{}],operateForm:{name:"",addr:"",age:"",birth:""},formLabel:[{model:"keyword",label:"",type:"input"}],searchForm:{keyword:""}}},methods:{confirm:function(){},addUser:function(){this.isShown=!0},getList:function(){}},mounted:function(){var t=this;this.$store.commit("setLoading",!0),$().get($().defaults.baseURL+"card.php?email="+this.$store.state.user.email).then((function(e){t.$store.commit("setCards",e.data.cards),console.log("card:",t.$store.state.user.cards)})).catch((function(t){console.log(t)})).finally((function(){t.$store.commit("setLoading",!1)}))}},De=$e,Se=(0,d.Z)(De,le,ce,!1,null,null,null),xe=Se.exports,Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editForm"},[a("el-dialog",{attrs:{title:"add"===t.operateType?"Add a task":"Update a task",visible:t.isShown},on:{"update:visible":function(e){t.isShown=e}}},[a("CrudForm",{ref:"form",attrs:{formLabel:t.operateFormLabel,form:t.operateForm,inline:!0}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShow=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("Confirm")])],1)],1),a("TaskTable")],1)},_e=[],Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(e){return t.handleAdd()}}},[t._v("Add")])],1)],1),a("el-dialog",{attrs:{title:"add"===t.operateType?"Add a task":"Update a task",visible:t.isDialogShown},on:{"update:visible":function(e){t.isDialogShown=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Card",required:""}},[a("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"select one card"},model:{value:t.form.cardID,callback:function(e){t.$set(t.form,"cardID",e)},expression:"form.cardID"}},[a("el-option",{directives:[{name:"show",rawName:"v-show",value:0===this.$store.state.user.cards.length,expression:"this.$store.state.user.cards.length === 0"}],attrs:{value:"item.name",disabled:""}},[t._v("You don't have any card yet")]),t._l(this.$store.state.user.cards,(function(e){return a("el-option",{key:e.cardID,attrs:{value:e.name}},[t._v(t._s(e.name))])}))],2)],1),a("el-form-item",{attrs:{label:"Task Name"}},[a("el-input",{model:{value:t.form.taskName,callback:function(e){t.$set(t.form,"taskName",e)},expression:"form.taskName"}})],1),a("el-form-item",{attrs:{label:"Task Description"}},[a("el-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("el-form-item",{attrs:{label:"Due Date"}},[a("el-date-picker",{staticStyle:{float:"left"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"Select date and time","picker-options":t.pickerOptions},model:{value:t.form.due_date,callback:function(e){t.$set(t.form,"due_date",e)},expression:"form.due_date"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"add"!==t.operateType,expression:"operateType !== 'add'"}],attrs:{label:"Email",hidden:""}},[a("el-input",{model:{value:t.form.Email,callback:function(e){t.$set(t.form,"Email",e)},expression:"form.Email"}})],1),a("el-form-item",{attrs:{label:"Extra Notes"}},[a("el-input",{model:{value:t.form.extra_notes,callback:function(e){t.$set(t.form,"extra_notes",e)},expression:"form.extra_notes"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"add"!==t.operateType,expression:"operateType !== 'add'"}],attrs:{label:"Task ID",hidden:""}},[a("el-input",{model:{value:t.form.taskID,callback:function(e){t.$set(t.form,"taskID",e)},expression:"form.taskID"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isDialogShown=!1}}},[t._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onsubmit}},[t._v("Confirm")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tasks.filter((function(e){return!t.taskSearch||e.name.toLowerCase().includes(t.taskSearch.toLowerCase())}))}},[a("el-table-column",{attrs:{sortable:"",label:"Card",prop:"cardName"}}),a("el-table-column",{attrs:{sortable:"",label:"Task Name",prop:"name"}}),a("el-table-column",{attrs:{sortable:"",label:"Description",prop:"description"}}),a("el-table-column",{attrs:{sortable:"",label:"Due Date",prop:"due_date"}}),a("el-table-column",{attrs:{sortable:"",label:"Extra Notes",prop:"extra_notes"}}),a("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-input",{attrs:{placeholder:"Type to search"},on:{click:function(a){return t.console.log(e)}},model:{value:t.taskSearch,callback:function(e){t.taskSearch=e},expression:"taskSearch"}})]}},{key:"default",fn:function(e){return[a("el-button",{on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("Edit")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("Delete")])]}}])})],1)],1)},Ie=[],Le={components:{},mounted:function(){this.getCards()},data:function(){return{taskSearch:"",operateType:"add",isDialogShown:!1,form:{Email:"",taskName:"",taskID:void 0,description:"",extra_notes:"",cardID:void 0,due_date:void 0},pickerOptions:{shortcuts:[{text:"Today",onClick:function(t){t.$emit("pick",new Date)}},{text:"Tomorrow",onClick:function(t){var e=new Date;e.setTime(e.getTime()+864e5),t.$emit("pick",e)}},{text:"A week later",onClick:function(t){var e=new Date;e.setTime(e.getTime()+6048e5),t.$emit("pick",e)}}]}}},computed:{tasks:function(){for(var t=this.$store.state.user.tasks,e=0;e<t.length;e++){var a=t[e]["cardID"];t[e]["cardName"]=this.getCardNameByCardId(a)}return t}},methods:{handleEdit:function(t,e){this.isDialogShown=!0,this.operateType="edit",this.form.taskName=e.name,this.form.Email=e.email,this.form.taskID=e.taskID,this.form.description=e.description,this.form.extra_notes=e.extra_notes,this.form.due_date=e.due_date,this.form.cardID=this.getCardNameByCardId(e.cardID)},handleDelete:function(t,e){var a=this,s=this;this.$confirm("Are you sure to delete this task?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){a.$store.commit("setLoading",!0),$()["delete"]($().defaults.baseURL+"/task.php?taskID="+e.taskID).then((function(t){s.$store.commit("setLoading",!1),t.data.status&&"success"===t.data.status&&(s.getCards(),s.getTasks(),s.$message({type:"success",message:"Deleted successfully"}))}))})).catch((function(){}))},handleAdd:function(){this.form.taskName="",this.form.Email=this.$store.state.user.email,this.form.description="",this.form.extra_notes="",this.form.cardID="",this.form.due_date=void 0,this.isDialogShown=!0,this.operateType="add"},getCardNameByCardId:function(t){for(var e=this.$store.state.user.cards,a=0;a<e.length;a++)if(e[a].cardID===t)return e[a].name;return""},onsubmit:function(){var t=this;this.isDialogShown=!1,this.form.cardID=this.getCardIdByCardName(this.form.cardID),$()({method:"add"===this.operateType?"post":"put",url:$().defaults.baseURL+"/task.php",data:Dt(this.form)}).then((function(e){t.$store.commit("setLoading",!1),e.data.status&&"success"===e.data.status?(t.getCards(),t.getTasks(),t.$message({type:"success",message:"add"===t.operateType?"Added successfully":"Updated successfully"})):e.data.status&&"error"===e.data.status&&t.$message({type:"error",message:e.data.error})}))}}},Ee=Le,Ne=(0,d.Z)(Ee,Te,Ie,!1,null,null,null),Pe=Ne.exports,Oe={name:"StackEditPage",props:{msg:String},components:{CrudForm:pe,TaskTable:Pe},data:function(){return{operateType:"add",isShown:!1,operateFormLabel:[{model:"TaskName",label:"Task Name",type:"input"},{model:"TaskDescription",label:"Description",type:"input"},{}],operateForm:{name:"",addr:"",age:"",birth:""},formLabel:[{model:"keyword",label:"",type:"input"}],searchForm:{keyword:""}}},methods:{confirm:function(){},addUser:function(){this.isShown=!0},getList:function(){}},mounted:function(){var t=this;this.$store.commit("setLoading",!0),$().get($().defaults.baseURL+"task.php?email="+this.$store.state.user.email).then((function(e){t.$store.commit("setTasks",e.data.tasks)})).catch((function(t){console.log(t)})).finally((function(){t.$store.commit("setLoading",!1)}))}},Fe=Oe,Ue=(0,d.Z)(Fe,Ce,_e,!1,null,null,null),Re=Ue.exports,Ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("DemoChart")],1)},Ze=[],Be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{width:"80vh",height:"80vh"},attrs:{id:"myChart"}})},Me=[],je=(a(1249),{data:function(){return{msg:"aa",graphData:[["2022-04-01",260],["2022-04-04",200],["2022-04-09",279],["2022-04-13",847],["2022-04-18",241],["2022-04-23",411],["2022-05-14",985]]}},mounted:function(){this.links.pop();var t=this.$echarts.init(document.getElementById("myChart"));this.option&&t.setOption(this.option)},computed:{links:function(){var t=this.graphData.map((function(t,e){return{source:e,target:e+1}}));return t},option:function(){var t={tooltip:{},calendar:{top:"middle",left:"center",orient:"vertical",cellSize:40,yearLabel:{margin:50,fontSize:30},dayLabel:{firstDay:1,nameMap:"usa"},monthLabel:{nameMap:"usa",margin:15,fontSize:20,color:"#999"},range:["2022-04","2022-05-31"]},visualMap:{min:0,max:10,type:"piecewise",left:"center",bottom:20,inRange:{color:["#5291FF","#C7DBFF"]},seriesIndex:[1],orient:"horizontal"},series:[{type:"graph",edgeSymbol:["none","arrow"],coordinateSystem:"calendar",links:this.links,symbolSize:15,calendarIndex:0,itemStyle:{color:"yellow",shadowBlur:9,shadowOffsetX:1.5,shadowOffsetY:3,shadowColor:"#555"},lineStyle:{color:"#D10E00",width:1,opacity:1},data:this.graphData,z:20},{type:"heatmap",coordinateSystem:"calendar",data:this.getVirtulData("2022")}]};return t}},methods:{getVirtulData:function(t){t=t||"2022";for(var e=+this.$echarts.number.parseDate(t+"-01-01"),a=+this.$echarts.number.parseDate(+t+1+"-01-01"),s=864e5,o=[],r=e;r<a;r+=s)o.push([this.$echarts.format.formatTime("yyyy-MM-dd",r),Math.floor(10*Math.random())]);return o}}}),He=je,ze=(0,d.Z)(He,Be,Me,!1,null,null,null),qe=ze.exports,Ve={components:{DemoChart:qe},data:function(){return{url:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}}},Ye=Ve,We=(0,d.Z)(Ye,Ae,Ze,!1,null,"2e57dd30",null),Ke=We.exports,Ge=new F.Z({routes:[{name:"UserHome",path:"/",component:kt,meta:{transition:"slide-left"}},{name:"SignupPage",path:"/signup",component:Et,meta:{transition:"slide-right"}},{name:"LoginPage",path:"/login",component:Ht,meta:{transition:"slide-left"}},{name:"SettingPage",path:"/settings",component:Kt,meta:{transition:"slide-right"}},{name:"StackEditPage",path:"/edit-stack",component:ie,meta:{transition:"slide-right"}},{name:"CardEditPage",path:"/edit-card",component:xe,meta:{transition:"slide-right"}},{name:"TaskEditPage",path:"/edit-task",component:Re,meta:{transition:"slide-right"}},{name:"ChartsPage",path:"/charts",component:Ke,meta:{transition:"slide-right"}}]}),Je=a(329),Xe={methods:{},state:{token:"",email:"",loading:!1,loadingText:"",stacks:[],cards:[],tasks:[],isLoggedIn:!1,editing:"",displayingCardID:void 0,displayingTasks:[]},mutations:{setDisplayingTasks:function(t,e){t.displayingTasks=e},clearDisplayingTasks:function(t){t.displayingTasks=[]},setDisplayingCardID:function(t,e){t.displayingCardID=e},clearDisplayingCardID:function(t){t.displayingCardID=void 0},setLoadingText:function(t,e){t.loadingText=e},getStackNameByStackId:function(t){for(var e=this.$store.state.user.stacks,a=0;a<e.length;a++)if(e[a].stackID===t)return e[a].name;return-1},setToken:function(t,e){t.token=e,Je.Z.set("token",e)},clearToken:function(t){t.token="",Je.Z.remove("token")},getToken:function(t){t.token=t.token||Je.Z.get("token")},setEmail:function(t,e){t.email=e,Je.Z.set("email",e)},clearEmail:function(t){t.email="",Je.Z.remove("email")},getEmail:function(t){t.email=t.email||Je.Z.get("email")},setLoading:function(t,e){t.loading=e},clearTasks:function(t){t.tasks=[]},clearStacks:function(t){t.stacks=[]},setStacks:function(t,e){t.stacks=e},setCards:function(t,e){t.cards=e},clearCards:function(t){t.cards=[]},setTasks:function(t,e){t.tasks=e},setIsLoggedIn:function(t,e){t.isLoggedIn=e},setEditing:function(t,e){t.editing=e}}};s["default"].use(g.ZP);var Qe={namespaced:!0,state:{open:!1},actions:{toggleMenu:function(t){var e=t.commit,a=t.state;return e("setOpen",!a.open)}},mutations:{setOpen:function(t,e){s["default"].set(t,"open",e)}}};s["default"].use(g.ZP);var ta=new g.ZP.Store({modules:{menu:Qe,user:Xe}}),ea={api:"./php/"},aa=a(187),sa=a(2334),oa=a.n(sa),ra=a(8522);function na(){var t=["#00659d","#00abbc","#e2c58a","#fc8890","#b35d7f"];return t[Math.floor(Math.random()*t.length)]}s["default"].config.productionTip=!1,s["default"].use(I(),{locale:aa.Z}),s["default"].use(O),s["default"].use(F.Z),s["default"].use(oa()),s["default"].prototype.$echarts=ra,s["default"].prototype.getStacks=function(){var t=this;$().get($().defaults.baseURL+"stack.php?email="+this.$store.state.user.email).then((function(e){t.$store.commit("setStacks",e.data.stacks)})).catch((function(t){console.log(t)}))},s["default"].prototype.getCards=function(){var t=this;$().get($().defaults.baseURL+"card.php?email="+this.$store.state.user.email).then((function(e){t.$store.commit("setCards",e.data.cards),console.log("cards",t.$store.state.user.cards)})).catch((function(t){console.log(t)}))},s["default"].prototype.getTasks=function(){var t=this;$().get($().defaults.baseURL+"task.php?email="+this.$store.state.user.email).then((function(e){for(var a=e.data.tasks,s=0;s<a.length;s++)a[s]["color"]=na();console.log("processed tasks",a),t.$store.commit("setTasks",a),t.$store.commit("setDisplayingTasks",a),t.$store.commit("setDisplayingCardID",0)})).catch((function(t){console.log(t)}))},s["default"].prototype.getCardsByStackID=function(t){for(var e=this.$store.state.user.cards,a=[],s=0;s<e.length;s++)e[s]["stackID"]===t&&a.push(e[s]);return a},s["default"].prototype.updateAllData=function(){this.getStacks(),this.getCards(),this.getTasks()},s["default"].prototype.taskAxios=function(){var t=this;return $().request({url:$().defaults.baseURL+"task.php?email="+t.$store.state.user.email,withCredentials:!0})},s["default"].prototype.getCardIdByCardName=function(t){for(var e=this.$store.state.user.cards,a=0;a<e.length;a++)if(e[a].name===t)return e[a].cardID},s["default"].prototype.showReminder=function(){var t=this;setTimeout((function(){var e=t.$store.state.user.tasks.filter((function(t){return new Date(t["due_date"])<new Date}));t.$store.state.user.email&&t.$store.state.user.email.length>0&&t.$notify.info({title:"Reminder",dangerouslyUseHTMLString:!0,message:"You have "+"<h1>".concat(t.$store.state.user.tasks.length,"</h1>")+" tasks",duration:4500,offset:70}),setTimeout((function(){e.length>0&&t.$notify.warning({title:"Reminder",dangerouslyUseHTMLString:!0,message:"You have "+"<h1>".concat(e.length,"</h1>")+" tasks past due time",duration:5e3,offset:70})}),500)}),2e3)},$().defaults.baseURL=ea.api,s["default"].prototype.apiConfig=ea,Ge.beforeEach((function(t,e,a){console.log("redirected from: ",e," to:",t),ta.commit("getToken");var s=ta.state.user.token;"undefined"===typeof s||null===s||0===s.length?"LoginPage"!==t.name&&"SignupPage"!==t.name&&"UserHome"!==t.name?(a({name:"LoginPage"}),console.log("blocked without token")):a():s&&("SignupPage"===t.name||"LoginPage"===t.name?(a({name:"UserHome"}),console.log("blocked with token",s)):"UserHome"===e.name&&"UserHome"!==t.name?(ta.commit("setDisplayingCardID",void 0),a()):a())}));L.Z;new s["default"]({store:ta,vuetify:O,render:function(t){return t(_)},router:Ge}).$mount("#app")},1199:function(t,e,a){t.exports=a.p+"img/1.16e516be.png"},4151:function(t,e,a){t.exports=a.p+"img/2.f041e342.png"},3110:function(t,e,a){t.exports=a.p+"img/3.1ad2782f.png"},6949:function(t,e,a){t.exports=a.p+"img/logo.46dd0abe.png"}},e={};function a(s){var o=e[s];if(void 0!==o)return o.exports;var r=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,s,o,r){if(!s){var n=1/0;for(d=0;d<t.length;d++){s=t[d][0],o=t[d][1],r=t[d][2];for(var i=!0,l=0;l<s.length;l++)(!1&r||n>=r)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(i=!1,r<n&&(n=r));if(i){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[s,o,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){a.p=""}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,r,n=s[0],i=s[1],l=s[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(l)var d=l(a)}for(e&&e(s);c<n.length;c++)r=n[c],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(d)},s=self["webpackChunkvue_2"]=self["webpackChunkvue_2"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(8594)}));s=a.O(s)})();
//# sourceMappingURL=app-legacy.c7175fac.js.map