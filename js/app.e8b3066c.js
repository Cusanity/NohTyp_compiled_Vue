(function(){"use strict";var e={3921:function(e,t,s){var a=s(8935),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[s("el-aside",{attrs:{width:"auto"}},[s("NavMenu")],1),s("el-container",[s("el-header",{staticStyle:{height:"60px",padding:"0"}},[s("NavBar")],1),s("el-main",[s("router-view",{key:e.$route.fullPath,scopedSlots:e._u([{key:"default",fn:function(e){var t=e.Component,a=e.route;return[s("transition",{attrs:{name:a.meta.transition||"fade"}},[s(t,{tag:"component"})],1)]}}])})],1)],1)],1)],1)},r=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"line"}),s("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex2,mode:"horizontal","background-color":"#005BBB","text-color":"#fff","active-text-color":"#ffffff",router:""}},[s("el-menu-item",{attrs:{index:"/"}},[e._v("DotPlan")]),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!this.$store.state.user.isLoggedIn,expression:"!this.$store.state.user.isLoggedIn"}],attrs:{index:"signup",route:"signup"}},[e._v(" Sign Up ")]),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!this.$store.state.user.isLoggedIn,expression:"!this.$store.state.user.isLoggedIn"}],attrs:{index:"login",route:"login"}},[e._v(" Log In ")]),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.user.isLoggedIn,expression:"this.$store.state.user.isLoggedIn"}],staticStyle:{float:"right"}},[s("el-dropdown",[s("el-button",{staticStyle:{float:"right",color:"white"},attrs:{type:"primary"}},[e._v(" "+e._s(this.$store.state.user.email)+" "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[s("el-link",{attrs:{underline:!1},on:{click:e.goSettings}},[e._v("Settings")])],1),s("el-dropdown-item",[s("el-link",{attrs:{underline:!1},on:{click:e.logout}},[e._v("Log Out")])],1)],1)],1)],1),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.user.isLoggedIn,expression:"this.$store.state.user.isLoggedIn"}],staticStyle:{float:"right"},on:{click:e.logout}})],1)],1)},n=[],l={data(){return{activeIndex:"1",activeIndex2:"1"}},methods:{logout(){this.$confirm("Are you sure to log out?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{this.$store.commit("clearToken"),this.$store.commit("clearEmail"),this.$store.commit("setIsLoggedIn",!1),this.$store.commit("setLoading",!0),this.$store.commit("clearTasks"),this.$store.commit("clearCards"),this.$store.commit("clearStacks"),this.$store.commit("clearDisplayingCardID"),this.$store.commit("clearDisplayingTasks"),this.$router.push({name:"UserHome"}),setTimeout((()=>{this.$store.commit("setLoading",!1),this.$message({type:"success",message:"You have logged out"})}),1e3)})).catch((()=>{}))},goSettings(){"SettingPage"!==this.$route.name&&(this.$store.commit("setLoading",!0),setTimeout((()=>{this.$store.commit("setLoading",!1),this.$router.push({name:"SettingPage"})}),500))}},computed:{}},c=l,d=s(1001),m=(0,d.Z)(c,i,n,!1,null,null,null),u=m.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{"background-color":"#d9d8d7"},attrs:{id:"leftmenu"}},[s("el-radio-group",{staticStyle:{"padding-top":"10px"},model:{value:e.menuOpen,callback:function(t){e.menuOpen=t},expression:"menuOpen"}},[s("el-button",{attrs:{type:"primary",icon:"el-icon-menu",circle:""},on:{click:e.toggleNav}})],1),s("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{height:"93vh"},attrs:{"default-active":"2",collapse:!e.menuOpen,"background-color":"#d9d8d7",router:""},on:{open:e.handleOpen,close:e.handleClose}},[s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.isLoggedIn,expression:"isLoggedIn"}],attrs:{index:"/"}},[s("i",{staticClass:"el-icon-menu"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("User Home")])]),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.isLoggedIn,expression:"isLoggedIn"}],attrs:{index:"charts"}},[s("i",{staticClass:"el-icon-s-data"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("Charts")])]),s("el-submenu",{directives:[{name:"show",rawName:"v-show",value:e.isLoggedIn,expression:"isLoggedIn"}],attrs:{index:"1"}},[s("template",{slot:"title"},[s("i",{staticClass:"el-icon-location"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("Edit")])]),s("el-menu-item-group",[s("el-menu-item",{attrs:{index:"edit-stack"}},[e._v("Stack")]),s("el-menu-item",{attrs:{index:"edit-card"}},[e._v("Card")]),s("el-menu-item",{attrs:{index:"edit-task"}},[e._v("Task")])],1)],2),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!e.isLoggedIn,expression:"!isLoggedIn"}],attrs:{index:"/"}},[s("i",{staticClass:"el-icon-menu"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("Introduction")])]),s("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.isLoggedIn,expression:"isLoggedIn"}],attrs:{index:"settings",route:"settings"}},[s("i",{staticClass:"el-icon-setting"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("Settings")])])],1)],1)},p=[],g=s(4665),f={data(){return{num:1}},computed:{...(0,g.rn)("menu",{menuOpen:e=>e.open}),isLoggedIn(){return this.$store.state.user.isLoggedIn}},methods:{...(0,g.nv)("menu",["toggleMenu"]),handleOpen(e,t){console.log(e,t)},handleClose(e,t){console.log(e,t)},toggleNav(){this.toggleMenu(),this.num++},updateEdit(e){this.$store.commit("setEditing",e)}}},k=f,v=(0,d.Z)(k,h,p,!1,null,null,null),y=v.exports,w=s(6166),b=s.n(w),$=s(9483);a["default"].use($.Z,b());var D={name:"App",components:{NavBar:u,NavMenu:y},data:()=>({selection:1}),computed:{loading(){return this.$store.state.user.loading},loading_text(){return this.$store.state.user.loadingText}},methods:{reserve(){this.loading=!0,setTimeout((()=>this.loading=!1),1e3)},updateLoginStatus(){let e=this;b().get(b().defaults.baseURL+"session.php?token="+this.$store.state.user.token).then((function(t){e.$store.commit("setIsLoggedIn",t.data&&"success"===t.data.status),"success"===t.data.status&&(e.$store.commit("setLoadingText","Redirecting..."),e.$store.commit("setLoading",!0),setTimeout((()=>{e.$store.commit("setLoading",!1),e.$store.commit("setLoadingText","Loading...")}),1e3)),t.data.email&&e.$store.commit("setEmail",t.data.email)})).catch((function(t){console.log(t),e.$store.commit("clearToken"),e.$store.commit("clearEmail"),e.$store.commit("clearTasks"),e.$store.commit("clearCards"),e.$store.commit("clearStacks"),e.$store.commit("setIsLoggedIn",!1),e.$store.commit("setLoading",!1),e.$router.push({name:"UserHome"})}))}},mounted(){this.updateLoginStatus(),this.showReminder(),setTimeout((()=>{this.getStacks(),this.getTasks(),this.getCards()}),1e3)}},S=D,x=(0,d.Z)(S,o,r,!1,null,null,null),C=x.exports,_=s(4549),T=s.n(_),I=s(3262),L=s(8209),E=s.n(L);s(243);a["default"].use(E());const N={};var P=new(E())(N),O=s(2809),F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[this.$store.state.user.isLoggedIn?e._e():s("LandingPage"),e.showTasksFinishedResult?s("el-result",{staticStyle:{"padding-top":"200px"},attrs:{icon:"success",title:"You have finished all your tasks!"}}):e._e(),s("AnotherStack",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.user.isLoggedIn&&this.$store.state.user.tasks.length>0,expression:"this.$store.state.user.isLoggedIn && this.$store.state.user.tasks.length > 0"}],attrs:{displayTasksNumber:e.displayTasksNumber,angle:e.angle,height:e.height,width:e.width,border:e.border}}),s("el-row",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.user.isLoggedIn&&this.$store.state.user.tasks.length>0,expression:"this.$store.state.user.isLoggedIn && this.$store.state.user.tasks.length > 0"}]},[s("div",{staticStyle:{float:"left","margin-bottom":"10px"}},[s("el-radio-group",{on:{change:e.show},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[s("el-radio-button",{attrs:{label:"Past Due"}}),s("el-radio-button",{attrs:{label:"Due Soon"}})],1),s("el-divider",{attrs:{direction:"vertical"}}),s("el-button",{attrs:{type:"info"},on:{click:e.clearSelection}},[e._v("Clear")]),s("el-popover",{attrs:{placement:"top-end",width:"400",trigger:"hover"}},[s("div",{staticClass:"block"},[s("span",{staticClass:"demonstration"},[e._v("Number")]),s("el-slider",{attrs:{step:1,max:8,"show-stops":""},model:{value:e.displayTasksNumber,callback:function(t){e.displayTasksNumber=t},expression:"displayTasksNumber"}}),s("span",{staticClass:"demonstration"},[e._v("Angle")]),s("el-slider",{attrs:{step:5,max:80,"show-stops":""},model:{value:e.angle,callback:function(t){e.angle=t},expression:"angle"}}),s("span",{staticClass:"demonstration"},[e._v("Height")]),s("el-slider",{attrs:{step:10,min:250,max:500},model:{value:e.height,callback:function(t){e.height=t},expression:"height"}}),s("span",{staticClass:"demonstration"},[e._v("Width")]),s("el-slider",{attrs:{step:10,min:270,max:500},model:{value:e.width,callback:function(t){e.width=t},expression:"width"}}),s("span",{staticClass:"demonstration"},[e._v("Border")]),s("el-slider",{attrs:{step:2,min:0,max:30},model:{value:e.border,callback:function(t){e.border=t},expression:"border"}})],1),s("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("Customize")])],1)],1)]),this.$store.state.user.isLoggedIn&&this.$store.state.user.tasks.length>0?s("TaskCascader",{on:{childOneClick:e.handleChildOneClick}}):e._e(),this.$store.state.user.isLoggedIn?s("DockContainer"):e._e()],1)},U=[],R=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{"dock-container":!0,open:e.dockOpen,"menu-open":e.menuOpen},on:{mouseover:function(t){e.hovered=!0},mouseleave:function(t){e.hovered=!1}}},[e.dockOpen?s("header",[s("span",{on:{click:e.toggleDock}},[e._v("Close")])]):e._e(),s("div",{staticClass:"stacks"},[s("div",[s("stack")],1),s("div",[s("stack")],1),s("div",[s("stack")],1),s("div",[s("stack")],1),s("div",[s("stack")],1),s("div",[s("stack")],1),s("div",[s("stack")],1),s("div",[s("stack")],1),s("div",[s("stack")],1),s("div",[s("stack")],1),s("div",[s("stack")],1),s("div",[s("stack")],1)]),s("div",{class:{overlay:!0,open:e.showOverlay},on:{click:e.toggleDock}},[s("p",[e._v("Open Dock")])])])},A=[],B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card-stack",on:{wheel:function(t){return e.scrollCards(t)}}},[s("vue-card-stack",{key:JSON.stringify(e.cards),staticStyle:{"padding-top":"100px"},attrs:{cards:e.cards,"stack-width":360,"card-width":280,speed:.5},scopedSlots:e._u([{key:"card",fn:function(t){var a=t.card;return[s("div",{staticStyle:{width:"100%",height:"100%","border-radius":"8px",padding:"8px"},style:{background:a.background},on:{click:function(t){e.clicked[a.data]=!0},mouseleave:function(t){e.clicked[a.data]=!1}}})]}}])})],1)},Z=[],M={name:"CardsStack",data(){return{SchoolName:"aaa",address:"bbb",clicked:Array(5).fill(!1),hidden:!0,testCards:[{due_date:"Today",extra_notes:"Omg do the thing",name:"First Card"},{due_date:void 0,extra_notes:void 0,name:"Second Card"},{due_date:"Tomorrow",extra_notes:"Some notes",name:"Third Card"},{due_date:"Tomorrow",extra_notes:"Some notes",name:"Fourth Card"},{due_date:"Tomorrow",extra_notes:"Some notes",name:"Fifth Card"}]}},computed:{cards(){return this.initCards(this.testCards)},isLoggedIn(){return this.$store.state.user.token&&this.$store.state.user.token.length>0}},methods:{getRandomColor(){const e=["#00659d","#00abbc","#e2c58a","#fc8890","#b35d7f"];return e[Math.floor(Math.random()*e.length)]},initCards(e){let t=[];for(let s=0;s<e.length;s++){let a={};a["background"]=this.getRandomColor(),a["data"]=e[s],t.push(a)}return t},scrollCards(e){e.preventDefault();const t=this.$refs.nextButton,s=this.$refs.prevButton;e.deltaY>0?t.click():s.click()},updateMouseover(e){this.clicked[e]=!0},updateMouseLeave(e){this.clicked[e]=!1},getAllTasks(){return b().request({url:b().defaults.baseURL+"session.php?param=tasks",withCredentials:!0})}},components:{VueCardStack:I.Z}},j=M,H=(0,d.Z)(j,B,Z,!1,null,"5d82769a",null),z=H.exports,q={name:"DockContainer",components:{Stack:z},data(){return{dockOpen:!1,hovered:!1}},computed:{...(0,g.rn)("menu",{menuOpen:e=>e.open}),showOverlay(){return this.hovered&&!this.dockOpen}},methods:{toggleDock(){this.dockOpen=!this.dockOpen}}},V=q,Y=(0,d.Z)(V,R,A,!1,null,"e363e768",null),W=Y.exports,K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",[s("el-carousel",{staticStyle:{width:"80%",margin:"0 auto"},attrs:{interval:2500,arrow:"hover",height:"50vh"}},e._l(e.desciptions,(function(e){return s("el-carousel-item",{key:e.desc},[s("img",{staticStyle:{width:"100%",height:"auto"},attrs:{src:e.imgSrc}})])})),1)],1)],1),s("el-row",{staticStyle:{width:"80%",margin:"0 auto","margin-top":"30px"}},[s("el-col",{attrs:{span:1}},[s("img",{staticStyle:{width:"auto",height:"auto","margin-top":"30px"},attrs:{src:e.logoImg}})]),s("el-col",{attrs:{span:13,offset:5}},[s("h1",{staticStyle:{"font-weight":"bold","font-size":"30px"}},[e._v(" Time Management APP")]),s("br"),s("br"),s("h3",{staticStyle:{color:"gray","font-weight":"lighter","text-align":"left"}},[e._v(" Effective time management begins with clear on exactly how you manage your time on your tasks. "),s("br"),s("br"),e._v(" If you are struggling to manage time then DotPlan app will help you go further, "),s("br"),s("br"),e._v(" It has simple user interface that easily customizable based on what you need for everyday use. ")])])],1)],1)},G=[],J={components:{},data(){return{isCollapse:!1,num:1,logoImg:s(6949),desciptions:[{desc:"aaa",imgSrc:s(1199)},{desc:"bbb",imgSrc:s(4151)},{desc:"ccc",imgSrc:s(3110)}]}}},X=J,Q=(0,d.Z)(X,K,G,!1,null,"7975b010",null),ee=Q.exports,te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-cascader-panel",{attrs:{options:e.stackOption,"show-all-levels":!1},on:{change:e.handleChange}})},se=[],ae={mounted(){this.getStacks()},computed:{stackOption(){let e=[];const t=this.$store.state.user.stacks;if(0!==t.length){const t={value:"All Tasks",label:"All Tasks"};e.push(t)}for(let s=0;s<t.length;s++){const a={};a["value"]=t[s].name,a["label"]=t[s].name,a["children"]=[];const o=this.getCardsByStackID(t[s].stackID);if(0===o.length){const e={value:"No cards under this stack",label:"No cards under this stack",disabled:!0};a["children"].push(e)}else for(let e=0;e<o.length;e++){const t={};t["value"]=o[e].name,t["label"]=o[e].name,a["children"].push(t)}e.push(a)}return e}},data(){return{}},methods:{handleChange(e){if("All Tasks"===e[0])return void setTimeout((()=>{this.$store.commit("setLoading",!1),this.$store.commit("setDisplayingCardID",0),this.$store.commit("setDisplayingTasks",this.$store.state.user.tasks)}),400);const t=e[1],s=this.getCardIdByCardName(t);this.$emit("childOneClick"),this.$store.commit("setLoading",!0),setTimeout((()=>{this.$store.commit("setLoading",!1),this.$store.commit("setDisplayingCardID",s),this.$store.commit("setDisplayingTasks",this.$store.state.user.tasks.filter((e=>e.cardID===s)))}),400)}}},oe=ae,re=(0,d.Z)(oe,te,se,!1,null,null,null),ie=re.exports,ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.updated?s("carousel-3d",{directives:[{name:"loading",rawName:"v-loading",value:e.stackLoading,expression:"stackLoading"}],staticStyle:{"margin-top":"20px","margin-bottom":"20px"},attrs:{"element-loading-text":"You don't have any tasks in this card","element-loading-spinner":"el-icon-timer",controlsVisible:"",display:this.displayTasksNumber,perspective:this.angle,height:this.height,width:this.width,border:this.border}},e._l(e.displayingTasks,(function(t,a){return s("slide",{key:t.taskID,style:{"background-color":t.color},attrs:{index:a}},[s("el-row",{staticStyle:{margin:"10px",padding:"10 auto"}},[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""}}),s("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:""}}),s("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""}})],1),s("el-descriptions",{staticStyle:{padding:"10px"},attrs:{direction:"horizontal",column:1,border:"",size:"medium"}},[s("el-descriptions-item",{attrs:{label:"Task"}},[e._v(" "+e._s(t.name)+" ")]),s("el-descriptions-item",{attrs:{label:"Extra Notes"}},[e._v(e._s(t.extra_notes))]),s("el-descriptions-item",{attrs:{label:"Due date",span:2}},[e._v(e._s(t.due_date))])],1)],1)})),1):e._e()},le=[],ce={props:["displayTasksNumber","angle","height","width","border"],mounted(){setInterval((()=>{this.displayingTasks=this.$store.state.user.displayingTasks}),500)},data(){return{updated:!0,displayingTasks:[]}},watch:{displayingTasks(){this.updated=!1,this.$nextTick((()=>{this.updated=!0}))}},computed:{tasks(){const e=this.$store.state.user.displayingCardID;return this.$store.state.user.tasks.filter((t=>t.cardID===e))},stackLoading(){if(this.$store.state.user.displayingTasks.length>0)return!1;const e=this.$store.state.user.displayingCardID;if(void 0===e)return!0;const t=this.$store.state.user.tasks.filter((t=>t.cardID===e));return 0===t.length}}},de=ce,me=(0,d.Z)(de,ne,le,!1,null,null,null),ue=me.exports,he={components:{DockContainer:W,LandingPage:ee,TaskCascader:ie,AnotherStack:ue},mounted(){this.updateAllData(),setInterval((()=>{this.showTasksFinishedResult=this.$store.state.user.isLoggedIn&&0===this.$store.state.user.tasks.length}),100)},data(){return{filter:"",selectionCleared:!0,showTasksFinishedResult:!1,displayTasksNumber:5,angle:35,height:270,width:360,border:2}},methods:{handleChildOneClick(){this.filter=""},show(){if("Past Due"===this.filter){const e=this.$store.state.user.displayingCardID,t=0===e?this.$store.state.user.tasks:this.$store.state.user.tasks.filter((t=>t["cardID"]===e));this.$store.commit("setDisplayingTasks",t.filter((e=>new Date(e["due_date"])<new Date)))}if("Due Soon"===this.filter){const e=this.$store.state.user.displayingCardID,t=0===e?this.$store.state.user.tasks:this.$store.state.user.tasks.filter((t=>t["cardID"]===e));this.$store.commit("setDisplayingTasks",t.filter((e=>new Date(e["due_date"])>new Date)))}},clearSelection(){this.filter="";const e=this.$store.state.user.displayingCardID,t=0===e?this.$store.state.user.tasks:this.$store.state.user.tasks.filter((t=>t["cardID"]===e));this.$store.commit("setDisplayingTasks",t)}},computed:{hasTasks(){return this.$store.state.user.tasks.length>0},tasksDisplaying(){return void 0!==this.$store.state.displayingCardID},showRadio(){return this.$store.state.user.isLoggedIn&&void 0===this.$store.state.user.displayingCardID||this.$store.state.user.displayingTasks.length>0}}},pe=he,ge=(0,d.Z)(pe,F,U,!1,null,null,null),fe=ge.exports,ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"box-card",staticStyle:{"margin-left":"auto","margin-right":"auto",width:"50%","margin-top":"10vh"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("Sign Up")])]),s("SignupForm")],1)],1)},ve=[],ye=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm.apply(null,arguments)}}},[s("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,size:"small","label-width":"100px","label-position":"left"}},[s("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"Email",prop:"Email"}},[s("el-input",{style:{width:"100%"},attrs:{placeholder:"Email",clearable:""},model:{value:e.formData.Email,callback:function(t){e.$set(e.formData,"Email",t)},expression:"formData.Email"}})],1)],1)],1),s("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"Password",prop:"Password"}},[s("el-input",{style:{width:"100%"},attrs:{placeholder:"Password",clearable:"","show-password":""},model:{value:e.formData.Password,callback:function(t){e.$set(e.formData,"Password",t)},expression:"formData.Password"}})],1)],1)],1),s("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{"label-width":"138px",label:"Confirm Password",prop:"ConfirmPassword"}},[s("el-input",{style:{width:"100%"},attrs:{placeholder:"Confirm Password",clearable:"","show-password":""},model:{value:e.formData.ConfirmPassword,callback:function(t){e.$set(e.formData,"ConfirmPassword",t)},expression:"formData.ConfirmPassword"}})],1)],1)],1),s("el-form-item",{attrs:{size:"large"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("Sign Up")]),s("el-button",{on:{click:e.resetForm}},[e._v("Reset")])],1)],1)],1)},we=[];function be(e){const t={};for(const[s,a]of Object.entries(e))console.log(`${s}: ${a}`),t[s]=a;return t}var $e={components:{},props:[],data(){return{formData:{Email:void 0,Password:void 0,ConfirmPassword:void 0},rules:{Email:[{required:!0,message:"Email cannot be empty",trigger:"blur"},{pattern:/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.(com|cn|edu))+$/,message:"Wrong Email format",trigger:"blur"}],Password:[{required:!0,message:"Password is required",trigger:"blur"}],ConfirmPassword:[{required:!0,message:"Password cannot be empty",trigger:"blur"}]}}},computed:{},watch:{},created(){},mounted(){},methods:{submitForm(){var e=this;this.$refs["elForm"].validate((t=>{t&&(this.checkForm(this.formData)?(console.log(be(this.formData)),b().post(b().defaults.baseURL+"/signup.php",be(this.formData)).then((function(t){"error"===t.data.status?e.showError(t.data.error):(e.$store.commit("setLoading",!0),setTimeout((()=>{e.$store.commit("setLoading",!1),e.$router.push({name:"UserHome"}),e.$message({message:"Welcome!",type:"success"})}),1e3),e.$store.commit("setToken",t.data.token),e.$store.commit("setEmail",t.data.email),e.$store.commit("setIsLoggedIn",!0))})).catch((function(t){console.log(t),e.showError("Server is down")}))):this.showError("Passwords do not match"))}))},resetForm(){this.$refs["elForm"].resetFields()},checkForm(e){const t=e.Password,s=e.ConfirmPassword;return t===s},showError(e){this.$message.error(e)},serializeFormData(e){let t="";return t+="Email="+e.Email,t+="&",t+="Password="+e.Password,t}}},De=$e,Se=(0,d.Z)(De,ye,we,!1,null,null,null),xe=Se.exports,Ce={components:{SignupForm:xe}},_e=Ce,Te=(0,d.Z)(_e,ke,ve,!1,null,"73ccbe54",null),Ie=Te.exports,Le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"box-card",staticStyle:{"margin-left":"auto","margin-right":"auto",width:"50%","margin-top":"10vh"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("Login")])]),s("LoginForm")],1)],1)},Ee=[],Ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm.apply(null,arguments)}}},[s("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,size:"small","label-width":"100px","label-position":"left"}},[s("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"Email",prop:"Email"}},[s("el-input",{style:{width:"100%"},attrs:{placeholder:"Email",clearable:""},model:{value:e.formData.Email,callback:function(t){e.$set(e.formData,"Email",t)},expression:"formData.Email"}})],1)],1)],1),s("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"Password",prop:"Password"}},[s("el-input",{style:{width:"100%"},attrs:{placeholder:"Password",clearable:"","show-password":""},model:{value:e.formData.Password,callback:function(t){e.$set(e.formData,"Password",t)},expression:"formData.Password"}})],1)],1)],1),s("el-form-item",{attrs:{size:"large"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("Log In")])],1)],1)],1)},Pe=[],Oe={components:{},data(){return{formData:{Email:void 0,Password:void 0},rules:{Email:[{required:!0,message:"Email cannot be empty",trigger:"blur"},{pattern:/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.(com|cn|edu))+$/,message:"Wrong Email format",trigger:"blur"}],Password:[{required:!0,message:"Password is required",trigger:"blur"}]}}},computed:{},watch:{},created(){},mounted(){},methods:{submitForm(){var e=this;this.$refs["elForm"].validate((t=>{t&&b().post(b().defaults.baseURL+"/login.php",be(this.formData)).then((function(t){"success"===t.data.status?(e.$store.commit("setLoading",!0),e.$router.push({name:"UserHome"}),setTimeout((()=>{e.$store.commit("setLoading",!1),e.$message({message:"Login Success!",type:"success"})}),1e3),e.$store.commit("setToken",t.data.token),e.$store.commit("setEmail",t.data.email),e.$store.commit("setIsLoggedIn",!0)):"error"===t.data.status&&e.showError(t.data.error)})).catch((function(t){console.log(t),e.showError("Server is down")}))}))},showError(e){this.$message.error(e)}}},Fe=Oe,Ue=(0,d.Z)(Fe,Ne,Pe,!1,null,null,null),Re=Ue.exports,Ae={components:{LoginForm:Re},data(){return{url:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}}},Be=Ae,Ze=(0,d.Z)(Be,Le,Ee,!1,null,"7193d3d6",null),Me=Ze.exports,je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",{staticClass:"box-card",staticStyle:{"margin-left":"auto","margin-right":"auto",width:"50%","margin-top":"10vh"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("i",{staticClass:"el-icon-share"}),s("span",[s("b",[e._v(" Settings")])])]),s("el-row",[s("el-link",{attrs:{href:e.icsFile,download:"DotPlanEvents.ics"}},[s("el-button",{staticStyle:{width:"230px"},attrs:{type:"primary",icon:"el-icon-download",plain:""},on:{click:e.generateIcsFile}},[e._v("Export my tasks")])],1)],1),s("el-row",[s("el-button",{staticStyle:{width:"230px","margin-top":"15px"},attrs:{type:"primary",icon:"el-icon-edit",plain:""},on:{click:e.handleUpdatePassword}},[e._v("Change my password")])],1),s("el-row",[s("el-button",{staticStyle:{width:"230px","margin-top":"15px"},attrs:{type:"danger",icon:"el-icon-delete",plain:""},on:{click:e.handleDeleteUser}},[e._v("Delete my account")])],1)],1),s("el-dialog",{staticStyle:{"margin-left":"auto","margin-right":"auto",width:"65%"},attrs:{title:"Change password",visible:e.isDialogShown},on:{"update:visible":function(t){e.isDialogShown=t}}},[s("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.rules,"label-width":"180px"}},[s("el-form-item",{attrs:{label:"Email",hidden:""}},[s("el-input",{model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1),s("el-form-item",{attrs:{label:"Old password",prop:"password"}},[s("el-input",{attrs:{clearable:"","show-password":""},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1),s("el-form-item",{attrs:{label:"New password",prop:"newPassword"}},[s("el-input",{attrs:{clearable:"","show-password":""},model:{value:e.formData.newPassword,callback:function(t){e.$set(e.formData,"newPassword",t)},expression:"formData.newPassword"}})],1),s("el-form-item",{attrs:{label:"Confirm password",prop:"confirmPassword"}},[s("el-input",{attrs:{clearable:"","show-password":""},model:{value:e.formData.confirmPassword,callback:function(t){e.$set(e.formData,"confirmPassword",t)},expression:"formData.confirmPassword"}})],1)],1),s("el-button",{on:{click:function(t){e.isDialogShown=!1}}},[e._v("Cancel")]),s("el-button",{attrs:{type:"primary"},on:{click:e.onsubmit}},[e._v("Confirm")])],1)],1)},He=[],ze={components:{},data(){return{rules:{password:[{required:!0,message:"Old password is required",trigger:"blur"}],newPassword:[{required:!0,message:"Password cannot be empty",trigger:"blur"}],confirmPassword:[{required:!0,message:"Password cannot be empty",trigger:"blur"}]},isDialogShown:!1,icsFile:null,selection:1,loading:!1,formData:{email:void 0,password:void 0,newPassword:void 0,confirmPassword:void 0}}},computed:{email(){return this.$store.state.user.email}},methods:{handleDeleteUser(){let e=this;this.$confirm("This will permanently delete your account. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{b()["delete"](b().defaults.baseURL+"/login.php?email="+this.email).then((function(t){e.$store.commit("setLoading",!1),t.data.status&&"success"===t.data.status&&(e.$store.commit("clearToken"),e.$store.commit("clearEmail"),e.$store.commit("clearTasks"),e.$store.commit("clearCards"),e.$store.commit("clearStacks"),e.$store.commit("setIsLoggedIn",!1),e.$store.commit("setLoading",!1),e.$router.push({name:"UserHome"}),e.$message({type:"success",message:"Deleted successfully"}))}))})).catch((()=>{}))},onsubmit(){let e=this;this.formData.email=this.email,this.formData.newPassword===this.formData.confirmPassword?(this.isDialogShown=!1,b().put(b().defaults.baseURL+"/login.php",be(this.formData)).then((function(t){"success"===t.data.status?(e.$store.commit("setLoading",!0),setTimeout((()=>{e.$store.commit("setLoading",!1),e.$message({message:"Password updated!",type:"success"})}),1e3)):"error"===t.data.status&&(e.$store.commit("setLoading",!0),setTimeout((()=>{e.$store.commit("setLoading",!1),e.$message.error(t.data.error)}),1e3))})).catch((function(t){e.$message.error("Server is down"),e.$message.error(t)}))):this.$message.error("Passwords do not match")},handleUpdatePassword(){this.isDialogShown=!0,this.formData.email=this.email,this.formData.password=void 0,this.formData.newPassword=void 0,this.formData.confirmPassword=void 0},reserve(){this.loading=!0,setTimeout((()=>this.loading=!1),2e3)},convertDate(e){let t=new Date(e).toISOString();return t=t.split("T")[0],t=t.split("-"),t=t.join(""),t},getNextTaskCounter(){let e=parseInt(localStorage.userTaskCounter)+1;return localStorage.userTaskCounter=e,e},addEventDataToICSFile(e){let t="BEGIN:VEVENT\n",s=`${this.email}${e.taskID}@cse442NohTypDotPlan`,a=null,o=this.convertDate(Date.now());null!=e["due_date"]&&(console.log("Task with due date!"),a=this.convertDate(e["due_date"]));let r=e["name"],i=e["description"];return t+=`UID:${s}\nDTSTART:${o}\nSUMMARY:${r}\nDESCRIPTION:${i}\n`,null!=a&&(t+=`DTEND:${a}\n`),t+="END:VEVENT\n",t},generateIcsFile(e){const t=this.$store.state.user.tasks;if(!this.$store.state.user.tasks||0===this.$store.state.user.tasks.length)return void(e&&this.$message({message:"You have no tasks to export!",type:"warning"}));let s="BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Dot-Plan-Cal//EN\nCALSCALE:GREGORIAN\nMETHOD:PUBLISH\n";for(let o=0;o<t.length;o++)s+=this.addEventDataToICSFile(t[o]);s+="END:VCALENDAR\n";let a=new File([s],"DotPlanEvents.ics",{type:"text/calendar"});return null!==this.icsFile&&window.URL.revokeObjectURL(this.icsFile),this.icsFile=window.URL.createObjectURL(a),this.icsFile}},mounted(){setTimeout((()=>{this.generateIcsFile(!1)}),800)}},qe=ze,Ve=(0,d.Z)(qe,je,He,!1,null,"5cca56e1",null),Ye=Ve.exports,We=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"editForm"},[s("StackTable")],1)},Ke=[],Ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",[s("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("Add")])],1)],1),s("el-dialog",{attrs:{title:"add"===e.operateType?"Add a stack":"Update a stack",visible:e.isDialogShown},on:{"update:visible":function(t){e.isDialogShown=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"Stack Name"}},[s("el-input",{model:{value:e.form.stackName,callback:function(t){e.$set(e.form,"stackName",t)},expression:"form.stackName"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.isDialogShown=!1}}},[e._v("Cancel")]),s("el-button",{attrs:{type:"primary"},on:{click:e.onsubmit}},[e._v("Confirm")])],1)],1),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.stacks.filter((function(t){return!e.stackSearch||t.name.toLowerCase().includes(e.stackSearch.toLowerCase())}))}},[s("el-table-column",{attrs:{sortable:"",label:"Stack",prop:"name"}}),s("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("el-input",{attrs:{placeholder:"Type to search"},on:{click:function(s){return e.console.log(t)}},model:{value:e.stackSearch,callback:function(t){e.stackSearch=t},expression:"stackSearch"}})]}},{key:"default",fn:function(t){return[s("el-button",{on:{click:function(s){return e.handleEdit(t.$index,t.row)}}},[e._v("Edit")]),s("el-button",{attrs:{type:"danger"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}},[e._v("Delete")])]}}])})],1)],1)},Je=[],Xe={components:{},data(){return{stackSearch:"",operateType:"add",isDialogShown:!1,form:{Email:"",stackName:"",stackID:-1}}},computed:{stacks(){return this.$store.state.user.stacks}},methods:{handleEdit(e,t){console.log(e,t),this.isDialogShown=!0,this.operateType="edit",this.form.stackName=t.name,this.form.Email=t.email,this.form.stackID=t.stackID},handleDelete(e,t){const s=this;this.$confirm("Are you sure to delete this stack?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{this.$store.commit("setLoading",!0),b()["delete"](b().defaults.baseURL+"/stack.php?stackID="+t.stackID).then((function(e){s.$store.commit("setLoading",!1),e.data.status&&"success"===e.data.status&&(s.getStacks(),s.getCards(),s.$message({type:"success",message:"Deleted successfully"}))}))})).catch((()=>{}))},handleAdd(){this.form.stackName="",this.form.Email=this.$store.state.user.email,this.isDialogShown=!0,this.operateType="add"},onsubmit(){const e=this;this.isDialogShown=!1,b()({method:"add"===this.operateType?"post":"put",url:b().defaults.baseURL+"/stack.php",data:be(this.form)}).then((function(t){e.$store.commit("setLoading",!1),t.data.status&&"success"===t.data.status?(e.getStacks(),e.$message({type:"success",message:"add"===e.operateType?"Added successfully":"Updated successfully"})):t.data.status&&"error"===t.data.status&&e.$message({type:"error",message:t.data.error})}))}},mounted(){let e=this;this.$store.commit("setLoading",!0),b().get(b().defaults.baseURL+"stack.php?email="+this.$store.state.user.email).then((function(t){e.$store.commit("setStacks",t.data.stacks)})).catch((function(e){console.log(e)})).finally((()=>{e.$store.commit("setLoading",!1)}))}},Qe=Xe,et=(0,d.Z)(Qe,Ge,Je,!1,null,null,null),tt=et.exports,st={name:"StackEditPage",props:{msg:String},components:{StackTable:tt},data(){return{operateType:"add",isDialogShown:!1}},methods:{}},at=st,ot=(0,d.Z)(at,We,Ke,!1,null,null,null),rt=ot.exports,it=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"editForm"},[s("el-dialog",{attrs:{title:"add"===e.operateType?"Add a task":"Update a task",visible:e.isShown},on:{"update:visible":function(t){e.isShown=t}}},[s("CrudForm",{ref:"form",attrs:{formLabel:e.operateFormLabel,form:e.operateForm,inline:!0}}),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.isShow=!1}}},[e._v("Cancel")]),s("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("Confirm")])],1)],1),s("CardTable")],1)},nt=[],lt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-form",{ref:"form",attrs:{"label-width":"100px",model:e.form,inline:e.inline}},[e._l(e.formLabel,(function(t){return s("el-form-item",{key:t.label,attrs:{label:t.label}},["input"===t.type&&"StackName"===t.model?s("el-input",{model:{value:e.StackName,callback:function(t){e.StackName=t},expression:"StackName"}}):e._e(),"input"===t.type&&"TaskDescription"===t.model?s("el-input",{attrs:{placeholder:"Input"},model:{value:e.StackName,callback:function(t){e.StackName=t},expression:"StackName"}}):e._e(),"switch"===t.type?s("el-switch"):e._e(),"date"===t.type?s("el-date-picker",{attrs:{type:"date"}},["select"===t.type?s("el-select"):e._e(),e._l(t.opts,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],2):e._e()],1)})),s("el-form-item",[e._t("default")],2)],2)},ct=[],dt={name:"CrudForm",props:{formLabel:Array,form:Object,inline:Boolean},data(){return{StackName:""}},methods:{change(){this.$forceUpdate()}}},mt=dt,ut=(0,d.Z)(mt,lt,ct,!1,null,null,null),ht=ut.exports,pt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",[s("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("Add")])],1)],1),s("el-dialog",{attrs:{title:"add"===e.operateType?"Add a card":"Update a card",visible:e.isDialogShown},on:{"update:visible":function(t){e.isDialogShown=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"Card Name"}},[s("el-input",{model:{value:e.form.cardName,callback:function(t){e.$set(e.form,"cardName",t)},expression:"form.cardName"}})],1),s("el-form-item",{attrs:{label:"Stack",required:""}},[s("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"select one stack"},model:{value:e.form.stackID,callback:function(t){e.$set(e.form,"stackID",t)},expression:"form.stackID"}},[s("el-option",{directives:[{name:"show",rawName:"v-show",value:0===this.$store.state.user.stacks.length,expression:"this.$store.state.user.stacks.length === 0"}],attrs:{value:"item.name",disabled:""}},[e._v("You don't have any stack yet")]),e._l(this.$store.state.user.stacks,(function(t){return s("el-option",{key:t.stackID,attrs:{value:t.name}},[e._v(e._s(t.name))])}))],2)],1),s("el-form-item",{attrs:{label:"Card ID",hidden:""}},[s("el-input",{model:{value:e.form.cardID,callback:function(t){e.$set(e.form,"cardID",t)},expression:"form.cardID"}})],1),s("el-form-item",{attrs:{label:"Description"}},[s("el-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),s("el-form-item",{attrs:{label:"Extra Notes"}},[s("el-input",{model:{value:e.form.extra_notes,callback:function(t){e.$set(e.form,"extra_notes",t)},expression:"form.extra_notes"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.isDialogShown=!1}}},[e._v("Cancel")]),s("el-button",{attrs:{type:"primary"},on:{click:e.onsubmit}},[e._v("Confirm")])],1)],1),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cards.filter((function(t){return!e.cardSearch||t.name.toLowerCase().includes(e.cardSearch.toLowerCase())}))}},[s("el-table-column",{attrs:{sortable:"",label:"Stack",prop:"stackName"}}),s("el-table-column",{attrs:{sortable:"",label:"Card Name",prop:"name"}}),s("el-table-column",{attrs:{sortable:"",label:"Description",prop:"description"}}),s("el-table-column",{attrs:{sortable:"",label:"Extra Notes",prop:"extra_notes"}}),s("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("el-input",{attrs:{placeholder:"Type to search"},on:{click:function(s){return e.console.log(t)}},model:{value:e.cardSearch,callback:function(t){e.cardSearch=t},expression:"cardSearch"}})]}},{key:"default",fn:function(t){return[s("el-button",{on:{click:function(s){return e.handleEdit(t.$index,t.row)}}},[e._v("Edit")]),s("el-button",{attrs:{type:"danger"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}},[e._v("Delete")])]}}])})],1)],1)},gt=[],ft={mounted(){this.getStacks()},components:{},data(){return{cardSearch:"",operateType:"add",isDialogShown:!1,form:{Email:"",cardName:"",cardID:void 0,description:"",extra_notes:"",stackID:void 0}}},computed:{cards(){let e=this.$store.state.user.cards;for(let t=0;t<e.length;t++){const s=e[t]["stackID"];e[t]["stackName"]=this.getStackNameByStackId(s)}return e}},methods:{handleEdit(e,t){console.log(e,t),this.isDialogShown=!0,this.operateType="edit",this.form.cardName=t.name,this.form.Email=t.email,this.form.cardID=t.cardID,this.form.description=t.description,this.form.extra_notes=t.extra_notes,this.form.stackID=this.getStackNameByStackId(t.stackID)},handleDelete(e,t){const s=this;this.$confirm("Are you sure to delete this card?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{this.$store.commit("setLoading",!0),b()["delete"](b().defaults.baseURL+"/card.php?cardID="+t.cardID).then((function(e){s.$store.commit("setLoading",!1),e.data.status&&"success"===e.data.status&&(s.getCards(),s.$message({type:"success",message:"Deleted successfully"}))}))})).catch((()=>{}))},handleAdd(){this.form.cardName="",this.form.Email=this.$store.state.user.email,this.form.description="",this.form.extra_notes="",this.form.stackID="",this.isDialogShown=!0,this.operateType="add"},getStackIdByStackName(e){const t=this.$store.state.user.stacks;for(let s=0;s<t.length;s++)if(t[s].name===e)return t[s].stackID},getStackNameByStackId(e){const t=this.$store.state.user.stacks;for(let s=0;s<t.length;s++)if(t[s].stackID===e)return t[s].name;return""},onsubmit(){const e=this;this.isDialogShown=!1,this.form.stackID=this.getStackIdByStackName(this.form.stackID),b()({method:"add"===this.operateType?"post":"put",url:b().defaults.baseURL+"/card.php",data:be(this.form)}).then((function(t){e.$store.commit("setLoading",!1),t.data.status&&"success"===t.data.status?(e.getCards(),e.$message({type:"success",message:"add"===e.operateType?"Added successfully":"Updated successfully"})):t.data.status&&"error"===t.data.status&&e.$message({type:"error",message:t.data.error})}))}}},kt=ft,vt=(0,d.Z)(kt,pt,gt,!1,null,null,null),yt=vt.exports,wt={name:"StackEditPage",props:{msg:String},components:{CrudForm:ht,CardTable:yt},data(){return{operateType:"add",isShown:!1,operateFormLabel:[{model:"TaskName",label:"Task Name",type:"input"},{model:"TaskDescription",label:"Description",type:"input"},{}],operateForm:{name:"",addr:"",age:"",birth:""},formLabel:[{model:"keyword",label:"",type:"input"}],searchForm:{keyword:""}}},methods:{confirm(){},addUser(){this.isShown=!0},getList(){}},mounted(){let e=this;this.$store.commit("setLoading",!0),b().get(b().defaults.baseURL+"card.php?email="+this.$store.state.user.email).then((function(t){e.$store.commit("setCards",t.data.cards),console.log("card:",e.$store.state.user.cards)})).catch((function(e){console.log(e)})).finally((()=>{e.$store.commit("setLoading",!1)}))}},bt=wt,$t=(0,d.Z)(bt,it,nt,!1,null,null,null),Dt=$t.exports,St=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"editForm"},[s("el-dialog",{attrs:{title:"add"===e.operateType?"Add a task":"Update a task",visible:e.isShown},on:{"update:visible":function(t){e.isShown=t}}},[s("CrudForm",{ref:"form",attrs:{formLabel:e.operateFormLabel,form:e.operateForm,inline:!0}}),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.isShow=!1}}},[e._v("Cancel")]),s("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("Confirm")])],1)],1),s("TaskTable")],1)},xt=[],Ct=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",[s("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(t){return e.handleAdd()}}},[e._v("Add")])],1)],1),s("el-dialog",{attrs:{title:"add"===e.operateType?"Add a task":"Update a task",visible:e.isDialogShown},on:{"update:visible":function(t){e.isDialogShown=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"Card",required:""}},[s("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"select one card"},model:{value:e.form.cardID,callback:function(t){e.$set(e.form,"cardID",t)},expression:"form.cardID"}},[s("el-option",{directives:[{name:"show",rawName:"v-show",value:0===this.$store.state.user.cards.length,expression:"this.$store.state.user.cards.length === 0"}],attrs:{value:"item.name",disabled:""}},[e._v("You don't have any card yet")]),e._l(this.$store.state.user.cards,(function(t){return s("el-option",{key:t.cardID,attrs:{value:t.name}},[e._v(e._s(t.name))])}))],2)],1),s("el-form-item",{attrs:{label:"Task Name"}},[s("el-input",{model:{value:e.form.taskName,callback:function(t){e.$set(e.form,"taskName",t)},expression:"form.taskName"}})],1),s("el-form-item",{attrs:{label:"Task Description"}},[s("el-input",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),s("el-form-item",{attrs:{label:"Due Date"}},[s("el-date-picker",{staticStyle:{float:"left"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm",placeholder:"Select date and time","picker-options":e.pickerOptions},model:{value:e.form.due_date,callback:function(t){e.$set(e.form,"due_date",t)},expression:"form.due_date"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"add"!==e.operateType,expression:"operateType !== 'add'"}],attrs:{label:"Email",hidden:""}},[s("el-input",{model:{value:e.form.Email,callback:function(t){e.$set(e.form,"Email",t)},expression:"form.Email"}})],1),s("el-form-item",{attrs:{label:"Extra Notes"}},[s("el-input",{model:{value:e.form.extra_notes,callback:function(t){e.$set(e.form,"extra_notes",t)},expression:"form.extra_notes"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"add"!==e.operateType,expression:"operateType !== 'add'"}],attrs:{label:"Task ID",hidden:""}},[s("el-input",{model:{value:e.form.taskID,callback:function(t){e.$set(e.form,"taskID",t)},expression:"form.taskID"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.isDialogShown=!1}}},[e._v("Cancel")]),s("el-button",{attrs:{type:"primary"},on:{click:e.onsubmit}},[e._v("Confirm")])],1)],1),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tasks.filter((function(t){return!e.taskSearch||t.name.toLowerCase().includes(e.taskSearch.toLowerCase())}))}},[s("el-table-column",{attrs:{sortable:"",label:"Card",prop:"cardName"}}),s("el-table-column",{attrs:{sortable:"",label:"Task Name",prop:"name"}}),s("el-table-column",{attrs:{sortable:"",label:"Description",prop:"description"}}),s("el-table-column",{attrs:{sortable:"",label:"Due Date",prop:"due_date"}}),s("el-table-column",{attrs:{sortable:"",label:"Extra Notes",prop:"extra_notes"}}),s("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[s("el-input",{attrs:{placeholder:"Type to search"},on:{click:function(s){return e.console.log(t)}},model:{value:e.taskSearch,callback:function(t){e.taskSearch=t},expression:"taskSearch"}})]}},{key:"default",fn:function(t){return[s("el-button",{on:{click:function(s){return e.handleEdit(t.$index,t.row)}}},[e._v("Edit")]),s("el-button",{attrs:{type:"danger"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}},[e._v("Delete")])]}}])})],1)],1)},_t=[],Tt={components:{},mounted(){this.getCards()},data(){return{taskSearch:"",operateType:"add",isDialogShown:!1,form:{Email:"",taskName:"",taskID:void 0,description:"",extra_notes:"",cardID:void 0,due_date:void 0},pickerOptions:{shortcuts:[{text:"Today",onClick(e){e.$emit("pick",new Date)}},{text:"Tomorrow",onClick(e){const t=new Date;t.setTime(t.getTime()+864e5),e.$emit("pick",t)}},{text:"A week later",onClick(e){const t=new Date;t.setTime(t.getTime()+6048e5),e.$emit("pick",t)}}]}}},computed:{tasks(){let e=this.$store.state.user.tasks;for(let t=0;t<e.length;t++){const s=e[t]["cardID"];e[t]["cardName"]=this.getCardNameByCardId(s)}return e}},methods:{handleEdit(e,t){this.isDialogShown=!0,this.operateType="edit",this.form.taskName=t.name,this.form.Email=t.email,this.form.taskID=t.taskID,this.form.description=t.description,this.form.extra_notes=t.extra_notes,this.form.due_date=t.due_date,this.form.cardID=this.getCardNameByCardId(t.cardID)},handleDelete(e,t){const s=this;this.$confirm("Are you sure to delete this task?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{this.$store.commit("setLoading",!0),b()["delete"](b().defaults.baseURL+"/task.php?taskID="+t.taskID).then((function(e){s.$store.commit("setLoading",!1),e.data.status&&"success"===e.data.status&&(s.getCards(),s.getTasks(),s.$message({type:"success",message:"Deleted successfully"}))}))})).catch((()=>{}))},handleAdd(){this.form.taskName="",this.form.Email=this.$store.state.user.email,this.form.description="",this.form.extra_notes="",this.form.cardID="",this.form.due_date=void 0,this.isDialogShown=!0,this.operateType="add"},getCardNameByCardId(e){const t=this.$store.state.user.cards;for(let s=0;s<t.length;s++)if(t[s].cardID===e)return t[s].name;return""},onsubmit(){const e=this;this.isDialogShown=!1,this.form.cardID=this.getCardIdByCardName(this.form.cardID),b()({method:"add"===this.operateType?"post":"put",url:b().defaults.baseURL+"/task.php",data:be(this.form)}).then((function(t){e.$store.commit("setLoading",!1),t.data.status&&"success"===t.data.status?(e.getCards(),e.getTasks(),e.$message({type:"success",message:"add"===e.operateType?"Added successfully":"Updated successfully"})):t.data.status&&"error"===t.data.status&&e.$message({type:"error",message:t.data.error})}))}}},It=Tt,Lt=(0,d.Z)(It,Ct,_t,!1,null,null,null),Et=Lt.exports,Nt={name:"StackEditPage",props:{msg:String},components:{CrudForm:ht,TaskTable:Et},data(){return{operateType:"add",isShown:!1,operateFormLabel:[{model:"TaskName",label:"Task Name",type:"input"},{model:"TaskDescription",label:"Description",type:"input"},{}],operateForm:{name:"",addr:"",age:"",birth:""},formLabel:[{model:"keyword",label:"",type:"input"}],searchForm:{keyword:""}}},methods:{confirm(){},addUser(){this.isShown=!0},getList(){}},mounted(){let e=this;this.$store.commit("setLoading",!0),b().get(b().defaults.baseURL+"task.php?email="+this.$store.state.user.email).then((function(t){e.$store.commit("setTasks",t.data.tasks)})).catch((function(e){console.log(e)})).finally((()=>{e.$store.commit("setLoading",!1)}))}},Pt=Nt,Ot=(0,d.Z)(Pt,St,xt,!1,null,null,null),Ft=Ot.exports,Ut=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("DemoChart")],1)},Rt=[],At=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{style:{width:"80vh",height:"80vh"},attrs:{id:"myChart"}})},Bt=[],Zt={data(){return{msg:"aa",graphData:[["2022-04-01",260],["2022-04-04",200],["2022-04-09",279],["2022-04-13",847],["2022-04-18",241],["2022-04-23",411],["2022-05-14",985]]}},mounted(){this.links.pop();let e=this.$echarts.init(document.getElementById("myChart"));this.option&&e.setOption(this.option)},computed:{links(){const e=this.graphData.map((function(e,t){return{source:t,target:t+1}}));return e},option(){const e={tooltip:{},calendar:{top:"middle",left:"center",orient:"vertical",cellSize:40,yearLabel:{margin:50,fontSize:30},dayLabel:{firstDay:1,nameMap:"usa"},monthLabel:{nameMap:"usa",margin:15,fontSize:20,color:"#999"},range:["2022-04","2022-05-31"]},visualMap:{min:0,max:10,type:"piecewise",left:"center",bottom:20,inRange:{color:["#5291FF","#C7DBFF"]},seriesIndex:[1],orient:"horizontal"},series:[{type:"graph",edgeSymbol:["none","arrow"],coordinateSystem:"calendar",links:this.links,symbolSize:15,calendarIndex:0,itemStyle:{color:"yellow",shadowBlur:9,shadowOffsetX:1.5,shadowOffsetY:3,shadowColor:"#555"},lineStyle:{color:"#D10E00",width:1,opacity:1},data:this.graphData,z:20},{type:"heatmap",coordinateSystem:"calendar",data:this.getVirtulData("2022")}]};return e}},methods:{getVirtulData(e){e=e||"2022";for(var t=+this.$echarts.number.parseDate(e+"-01-01"),s=+this.$echarts.number.parseDate(+e+1+"-01-01"),a=864e5,o=[],r=t;r<s;r+=a)o.push([this.$echarts.format.formatTime("yyyy-MM-dd",r),Math.floor(10*Math.random())]);return o}}},Mt=Zt,jt=(0,d.Z)(Mt,At,Bt,!1,null,null,null),Ht=jt.exports,zt={components:{DemoChart:Ht},data(){return{url:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"}}},qt=zt,Vt=(0,d.Z)(qt,Ut,Rt,!1,null,"2e57dd30",null),Yt=Vt.exports,Wt=new O.Z({routes:[{name:"UserHome",path:"/",component:fe,meta:{transition:"slide-left"}},{name:"SignupPage",path:"/signup",component:Ie,meta:{transition:"slide-right"}},{name:"LoginPage",path:"/login",component:Me,meta:{transition:"slide-left"}},{name:"SettingPage",path:"/settings",component:Ye,meta:{transition:"slide-right"}},{name:"StackEditPage",path:"/edit-stack",component:rt,meta:{transition:"slide-right"}},{name:"CardEditPage",path:"/edit-card",component:Dt,meta:{transition:"slide-right"}},{name:"TaskEditPage",path:"/edit-task",component:Ft,meta:{transition:"slide-right"}},{name:"ChartsPage",path:"/charts",component:Yt,meta:{transition:"slide-right"}}]}),Kt=s(329),Gt={methods:{},state:{token:"",email:"",loading:!1,loadingText:"",stacks:[],cards:[],tasks:[],isLoggedIn:!1,editing:"",displayingCardID:void 0,displayingTasks:[]},mutations:{setDisplayingTasks(e,t){e.displayingTasks=t},clearDisplayingTasks(e){e.displayingTasks=[]},setDisplayingCardID(e,t){e.displayingCardID=t},clearDisplayingCardID(e){e.displayingCardID=void 0},setLoadingText(e,t){e.loadingText=t},getStackNameByStackId(e){const t=this.$store.state.user.stacks;for(let s=0;s<t.length;s++)if(t[s].stackID===e)return t[s].name;return-1},setToken(e,t){e.token=t,Kt.Z.set("token",t)},clearToken(e){e.token="",Kt.Z.remove("token")},getToken(e){e.token=e.token||Kt.Z.get("token")},setEmail(e,t){e.email=t,Kt.Z.set("email",t)},clearEmail(e){e.email="",Kt.Z.remove("email")},getEmail(e){e.email=e.email||Kt.Z.get("email")},setLoading(e,t){e.loading=t},clearTasks(e){e.tasks=[]},clearStacks(e){e.stacks=[]},setStacks(e,t){e.stacks=t},setCards(e,t){e.cards=t},clearCards(e){e.cards=[]},setTasks(e,t){e.tasks=t},setIsLoggedIn(e,t){e.isLoggedIn=t},setEditing(e,t){e.editing=t}}};a["default"].use(g.ZP);var Jt={namespaced:!0,state:{open:!1},actions:{toggleMenu({commit:e,state:t}){return e("setOpen",!t.open)}},mutations:{setOpen(e,t){a["default"].set(e,"open",t)}}};a["default"].use(g.ZP);var Xt=new g.ZP.Store({modules:{menu:Jt,user:Gt}}),Qt={api:"./php/"},es=s(187),ts=s(2334),ss=s.n(ts),as=s(8522);function os(){const e=["#00659d","#00abbc","#e2c58a","#fc8890","#b35d7f"];return e[Math.floor(Math.random()*e.length)]}a["default"].config.productionTip=!1,a["default"].use(T(),{locale:es.Z}),a["default"].use(P),a["default"].use(O.Z),a["default"].use(ss()),a["default"].prototype.$echarts=as,a["default"].prototype.getStacks=function(){let e=this;b().get(b().defaults.baseURL+"stack.php?email="+this.$store.state.user.email).then((function(t){e.$store.commit("setStacks",t.data.stacks)})).catch((function(e){console.log(e)}))},a["default"].prototype.getCards=function(){let e=this;b().get(b().defaults.baseURL+"card.php?email="+this.$store.state.user.email).then((function(t){e.$store.commit("setCards",t.data.cards),console.log("cards",e.$store.state.user.cards)})).catch((function(e){console.log(e)}))},a["default"].prototype.getTasks=function(){let e=this;b().get(b().defaults.baseURL+"task.php?email="+this.$store.state.user.email).then((function(t){const s=t.data.tasks;for(let e=0;e<s.length;e++)s[e]["color"]=os();console.log("processed tasks",s),e.$store.commit("setTasks",s),e.$store.commit("setDisplayingTasks",s),e.$store.commit("setDisplayingCardID",0)})).catch((function(e){console.log(e)}))},a["default"].prototype.getCardsByStackID=function(e){const t=this.$store.state.user.cards,s=[];for(let a=0;a<t.length;a++)t[a]["stackID"]===e&&s.push(t[a]);return s},a["default"].prototype.updateAllData=function(){this.getStacks(),this.getCards(),this.getTasks()},a["default"].prototype.taskAxios=function(){let e=this;return b().request({url:b().defaults.baseURL+"task.php?email="+e.$store.state.user.email,withCredentials:!0})},a["default"].prototype.getCardIdByCardName=function(e){const t=this.$store.state.user.cards;for(let s=0;s<t.length;s++)if(t[s].name===e)return t[s].cardID},a["default"].prototype.showReminder=function(){setTimeout((()=>{const e=this.$store.state.user.tasks.filter((e=>new Date(e["due_date"])<new Date));this.$store.state.user.email&&this.$store.state.user.email.length>0&&this.$notify.info({title:"Reminder",dangerouslyUseHTMLString:!0,message:`You have <h1>${this.$store.state.user.tasks.length}</h1> tasks`,duration:4500,offset:70}),setTimeout((()=>{e.length>0&&this.$notify.warning({title:"Reminder",dangerouslyUseHTMLString:!0,message:`You have <h1>${e.length}</h1> tasks past due time`,duration:5e3,offset:70})}),500)}),2e3)},b().defaults.baseURL=Qt.api,a["default"].prototype.apiConfig=Qt,Wt.beforeEach(((e,t,s)=>{console.log("redirected from: ",t," to:",e),Xt.commit("getToken");const a=Xt.state.user.token;"undefined"===typeof a||null===a||0===a.length?"LoginPage"!==e.name&&"SignupPage"!==e.name&&"UserHome"!==e.name?(s({name:"LoginPage"}),console.log("blocked without token")):s():a&&("SignupPage"===e.name||"LoginPage"===e.name?(s({name:"UserHome"}),console.log("blocked with token",a)):"UserHome"===t.name&&"UserHome"!==e.name?(Xt.commit("setDisplayingCardID",void 0),s()):s())}));I.Z;new a["default"]({store:Xt,vuetify:P,render:e=>e(C),router:Wt}).$mount("#app")},1199:function(e,t,s){e.exports=s.p+"img/1.16e516be.png"},4151:function(e,t,s){e.exports=s.p+"img/2.f041e342.png"},3110:function(e,t,s){e.exports=s.p+"img/3.1ad2782f.png"},6949:function(e,t,s){e.exports=s.p+"img/logo.46dd0abe.png"}},t={};function s(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}s.m=e,function(){s.amdO={}}(),function(){var e=[];s.O=function(t,a,o,r){if(!a){var i=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],r=e[d][2];for(var n=!0,l=0;l<a.length;l++)(!1&r||i>=r)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(n=!1,r<i&&(i=r));if(n){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,o,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p=""}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,r,i=a[0],n=a[1],l=a[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in n)s.o(n,o)&&(s.m[o]=n[o]);if(l)var d=l(s)}for(t&&t(a);c<i.length;c++)r=i[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},a=self["webpackChunkvue_2"]=self["webpackChunkvue_2"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(3921)}));a=s.O(a)})();
//# sourceMappingURL=app.e8b3066c.js.map